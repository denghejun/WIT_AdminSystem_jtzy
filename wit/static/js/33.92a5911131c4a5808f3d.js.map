{"version":3,"sources":["webpack:///src/pages/systemManagement/RegionPicture.vue","webpack:///./src/pages/systemManagement/RegionPicture.vue?f44f","webpack:///./src/pages/systemManagement/RegionPicture.vue"],"names":["RegionPicture","components","SelectRegion","name","data","titleName","regionValue","regionId","imageData","tableData","mounted","this","getRegionPic","methods","handleChange","file","fileData","raw","uploadFiles","_this2","_this","a","FormData","append","$api","waterRegionPic","addRegionPic","then","res","status","$message","type","message","_this3","params","waterregionid","findRegionPics","forEach","item","image","change","value","handleDelete","index","row","_this4","$confirm","confirmButtonText","cancelButtonText","console","log","id","deleteRegionPic","msg","catch","systemManagement_RegionPicture","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","display","flex-flow","margin-bottom","attrs","on","on-change","auto-upload","http-request","accept","action","size","border","stripe","label","width","prop","scopedSlots","_u","key","fn","scope","src","fixed","icon","click","$event","$index","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/33.92a5911131c4a5808f3d.js","sourcesContent":["<!--校区及DMA照片管理-->\r\n<template>\r\n  <div class=\"flex\">\r\n    <div class=\"content\">\r\n      <div class=\"box\">\r\n        <div class=\"box-header bg-aqua\">校区及DMA照片管理</div>\r\n        <div class=\"box-body\">\r\n          <div style=\"display: inline-flex;flex-flow:row;margin-bottom:10px;\">\r\n            <select-region :titleName=\"titleName\" :regionValue=\"regionValue\" @change=\"change\"></select-region>\r\n            &emsp;\r\n            <el-upload\r\n              :on-change=\"handleChange\"\r\n              :auto-upload='true'\r\n              :http-request=\"uploadFiles\"\r\n              accept=\"image/jpg,image/jpeg,image/png\"\r\n              action=''>\r\n              <el-button size=\"mini\" type=\"primary\">图片上传</el-button>\r\n            </el-upload>\r\n          </div>\r\n          <!--数据表格展示-->\r\n          <el-table\r\n            :data=\"imageData\"\r\n            size=\"mini\"\r\n            border\r\n            stripe>\r\n            <el-table-column\r\n              type=\"index\"\r\n              label=\"序号\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              width=\"200px\"\r\n              prop=\"waterregionname\"\r\n              label=\"建筑名称\">\r\n            </el-table-column>\r\n            <el-table-column\r\n              width=\"600px\"\r\n              label=\"照片\">\r\n              <template slot-scope=\"scope\">\r\n                <img :src=\"scope.row.image\" class=\"image_type\"/>\r\n              </template>\r\n            </el-table-column>\r\n            <el-table-column\r\n              prop=\"remark\"\r\n              label=\"备注\">\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=200px fixed=\"right\">\r\n              <template slot-scope=\"scope\">\r\n                <el-button\r\n                  size=\"mini\"\r\n                  icon=\"el-icon-delete\"\r\n                  type=\"danger\"\r\n                  @click=\"handleDelete(scope.$index, scope.row)\">删除照片</el-button>\r\n              </template>\r\n            </el-table-column>\r\n          </el-table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import SelectRegion from \"../../commons/SelectRegion\";\r\n  export default {\r\n    components: {\r\n      SelectRegion\r\n    },\r\n    name: \"region-picture\",\r\n    data(){\r\n      return {\r\n        titleName:'校区及DMA：',\r\n        regionValue:[1,1],\r\n        regionId : 1,\r\n        imageData:[],\r\n        tableData:[],\r\n      }\r\n    },\r\n    mounted(){\r\n      this.getRegionPic();\r\n    },\r\n    methods:{\r\n      handleChange(file){\r\n        this.fileData = file.raw ;\r\n      },\r\n      /*点击上传图片*/\r\n      uploadFiles(){\r\n        let _this = this;\r\n        let a = new FormData();\r\n        a.append(\"picFile\", _this.fileData); //传文件\r\n        a.append(\"waterregionid\",_this.regionId);\r\n        _this.$api.waterRegionPic.addRegionPic(a).then(res=>{\r\n          if(res.status== 200){\r\n            this.$message({\r\n              type: 'success',\r\n              message: '图片上传成功！'\r\n            });\r\n            _this.getRegionPic();\r\n          }else{\r\n            this.$message({\r\n              type: 'error',\r\n              message: '您的账号权限不足！'\r\n            });\r\n          }\r\n        })\r\n      },\r\n      /*获取区域图片*/\r\n      getRegionPic(){\r\n        let params = {\r\n          waterregionid:this.regionId\r\n        };\r\n        this.$api.waterRegionPic.findRegionPics(params).then(res => {\r\n          if(res == null || res == ''){\r\n            this.imageData = [];\r\n          }else{\r\n            res.forEach((item)=>{\r\n              item.image = \"data:image/jpg;base64,\"+item.image;\r\n            });\r\n            this.imageData = res ;\r\n          }\r\n        })\r\n      },\r\n      change(params){\r\n        this.regionId = params.value ;\r\n        this.getRegionPic();\r\n      },\r\n      //删除单行信息\r\n      handleDelete:function(index,row){\r\n        this.$confirm('此操作将永久删除该内容, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(()=>{\r\n          console.log(row.id)\r\n          this.$api.waterRegionPic.deleteRegionPic(row.id).then(res => {\r\n            if(res.msg == 'ok'){\r\n              this.$message({\r\n                type: 'success',\r\n                message: '删除成功！'\r\n              });\r\n              this.getRegionPic();\r\n            }else{\r\n              this.$message({\r\n                type: 'error',\r\n                message: '您的账号权限不足！'\r\n              });\r\n            }\r\n          }).catch(()=>{\r\n            this.$message({\r\n              type: 'info',\r\n              message: '删除失败！'\r\n            });\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n        })\r\n      },\r\n\r\n    }\r\n  }\r\n</script>\r\n\r\n<style scoped>\r\n  @import \"../../../static/css/noRow.css\";\r\n\r\n  .image_type{\r\n    width: 60%;\r\n  }\r\n</style>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/systemManagement/RegionPicture.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"flex\"},[_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"box\"},[_c('div',{staticClass:\"box-header bg-aqua\"},[_vm._v(\"校区及DMA照片管理\")]),_vm._v(\" \"),_c('div',{staticClass:\"box-body\"},[_c('div',{staticStyle:{\"display\":\"inline-flex\",\"flex-flow\":\"row\",\"margin-bottom\":\"10px\"}},[_c('select-region',{attrs:{\"titleName\":_vm.titleName,\"regionValue\":_vm.regionValue},on:{\"change\":_vm.change}}),_vm._v(\"\\n           \\n          \"),_c('el-upload',{attrs:{\"on-change\":_vm.handleChange,\"auto-upload\":true,\"http-request\":_vm.uploadFiles,\"accept\":\"image/jpg,image/jpeg,image/png\",\"action\":\"\"}},[_c('el-button',{attrs:{\"size\":\"mini\",\"type\":\"primary\"}},[_vm._v(\"图片上传\")])],1)],1),_vm._v(\" \"),_c('el-table',{attrs:{\"data\":_vm.imageData,\"size\":\"mini\",\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"200px\",\"prop\":\"waterregionname\",\"label\":\"建筑名称\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"width\":\"600px\",\"label\":\"照片\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('img',{staticClass:\"image_type\",attrs:{\"src\":scope.row.image}})]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"remark\",\"label\":\"备注\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"200px\",\"fixed\":\"right\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-delete\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.handleDelete(scope.$index, scope.row)}}},[_vm._v(\"删除照片\")])]}}])})],1)],1)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f82cc12e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/systemManagement/RegionPicture.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-f82cc12e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RegionPicture.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RegionPicture.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./RegionPicture.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f82cc12e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./RegionPicture.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-f82cc12e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/systemManagement/RegionPicture.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}