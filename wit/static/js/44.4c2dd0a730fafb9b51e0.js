webpackJsonp([44],{IuXE:function(e,t){},RJ1P:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={components:{SelectRegion:r("D1s6").a},data:function(){return{addDialog:!1,editDialog:!1,tableData:[],show:!1,input1:"",select1:"",currentPage:1,size:10,total:0,pages:0,ruleForm:{id:"",name:"",value:"",unit:"",remark:""},rules:{name:[{required:!0,message:"请输入统计参数名称",trigger:"blur"}],value:[{required:!0,message:"请输入统计参数数值",trigger:"blur"}],unit:[{required:!0,message:"请输入数值单位",trigger:"blur"}]}}},created:function(){this.refresh()},methods:{exportExcel:function(){var e=this.xlsx.utils.table_to_book(document.querySelector("#out-table"));console.log(e);var t=this.xlsx.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{this.fileSaver.saveAs(new Blob([t],{type:"application/octet-stream"}),"统计参数信息.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return t},addMessage:function(){this.addDialog=!0,this.ruleForm.name="",this.ruleForm.value="",this.ruleForm.unit="",this.ruleForm.remark=""},refresh:function(){var e=this,t={pageNum:this.currentPage,pageSize:this.size};this.$api.stats.findAllPage(t).then(function(t){e.tableData=t.list,e.total=t.total,e.pages=t.pages})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.ruleForm.id="";var r=t.qs.stringify(t.ruleForm);t.$api.stats.addStats(r).then(function(e){"ok"===e.msg?(t.addDialog=!1,t.$message({type:"success",message:"添加成功！"}),t.total%t.size==0?(t.currentPage=t.pages+1,t.refresh()):(t.currentPage=t.pages,t.refresh())):t.$message({type:"error",message:"您的账号权限不足！"})})})},cancelForm:function(){this.editDialog=!1,this.refresh()},editForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return t.refresh(),!1;var r=t.qs.stringify(t.ruleForm);t.$api.stats.updateStats(r).then(function(e){"ok"===e.msg?(t.editDialog=!1,t.$message({type:"success",message:"修改成功！"}),t.refresh()):(t.$message({type:"error",message:"您的账号权限不足！"}),t.refresh())})})},handleEdit:function(e,t){this.ruleForm=t},changePage:function(e){this.currentPage=e.currentPage,this.size=e.size,this.refresh()},handleDelete:function(e,t){var r=this;this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){r.$api.stats.deleteStats(t.id).then(function(e){"ok"==e.msg?(r.$message({type:"success",message:"删除成功！"}),r.total%r.size==1&&r.currentPage==r.pages&&(r.currentPage=r.pages-1),r.refresh()):r.$message({type:"error",message:"您的账号权限不足！"})}).catch(function(){r.$message({type:"info",message:"删除失败！"})})}).catch(function(){r.$message({type:"info",message:"已取消删除"})})}}},l={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex"},[r("el-dialog",{attrs:{title:"添加统计参数信息",visible:e.addDialog,width:"400px",top:"5%","before-close":e.handleClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.addDialog=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"medium"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-10"},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数值",prop:"value"}},[r("el-input",{model:{value:e.ruleForm.value,callback:function(t){e.$set(e.ruleForm,"value",t)},expression:"ruleForm.value"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1)])]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addDialog=!1}}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"修改统计参数信息",visible:e.editDialog,width:"400px",top:"5%","before-close":e.handleClose,"modal-append-to-body":!1},on:{"update:visible":function(t){e.editDialog=t}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"medium"}},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-xs-10"},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"数值",prop:"value"}},[r("el-input",{model:{value:e.ruleForm.value,callback:function(t){e.$set(e.ruleForm,"value",t)},expression:"ruleForm.value"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"单位",prop:"unit"}},[r("el-input",{model:{value:e.ruleForm.unit,callback:function(t){e.$set(e.ruleForm,"unit",t)},expression:"ruleForm.unit"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"备注",prop:"remark"}},[r("el-input",{model:{value:e.ruleForm.remark,callback:function(t){e.$set(e.ruleForm,"remark",t)},expression:"ruleForm.remark"}})],1)],1)])]),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.cancelForm}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),r("div",{staticClass:"content"},[r("div",{staticClass:"box"},[r("div",{staticClass:"box-header bg-aqua"},[e._v("统计参数信息管理")]),e._v(" "),r("div",{staticClass:"box-body"},[r("div",{staticStyle:{"margin-bottom":"10px"}},[r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:function(t){return t.stopPropagation(),e.addMessage(t)}}},[e._v("添加统计参数")]),e._v(" "),r("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:function(t){return t.stopPropagation(),e.exportExcel(t)}}},[e._v("报表导出")])],1),e._v(" "),r("el-table",{attrs:{data:e.tableData,size:"mini",stripe:"",id:"out-table","default-sort":{prop:"date",order:"descending"},border:""}},[r("el-table-column",{attrs:{width:"50",type:"index",label:"序号"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s((e.currentPage-1)*e.size+t.$index+1))])]}}])}),e._v(" "),e.show?r("el-table-column",{attrs:{prop:"id",sortable:""}}):e._e(),e._v(" "),r("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),r("el-table-column",{attrs:{prop:"value",label:"数值"}}),e._v(" "),r("el-table-column",{attrs:{prop:"unit",label:"单位"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),r("el-table-column",{attrs:{label:"操作",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(r){e.handleEdit(t.$index,t.row),e.editDialog=!0}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"box-footer"},[r("page",{attrs:{total:e.total},on:{changePage:e.changePage}})],1)])])],1)},staticRenderFns:[]};var o=r("VU/8")(a,l,!1,function(e){r("IuXE")},"data-v-28182f56",null);t.default=o.exports}});
//# sourceMappingURL=44.4c2dd0a730fafb9b51e0.js.map