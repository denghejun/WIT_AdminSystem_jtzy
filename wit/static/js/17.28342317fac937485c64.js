webpackJsonp([17],{BVzb:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("pFYg"),s=a.n(i),n=a("Xxa5"),l=a.n(n),r=a("exGp"),o=a.n(r),c=a("eshS"),d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"water-table"},[a("div",{staticClass:"first-column",style:{width:t.columnWidth}},[a("div",{staticClass:"first-column-row"},[t._v("时段")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨0-1")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨1-2")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨2-3")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨3-4")])]),t._v(" "),t._l(t.table,function(e,i){return a("div",{key:i,staticClass:"middle-column",style:{width:t.columnWidth}},[a("div",{staticClass:"middle-column-row"},[t._v(t._s(e.date))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(e.first,e)}},[t._v(t._s(e.first))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(e.second,e)}},[t._v(t._s(e.second))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(e.third,e)}},[t._v(t._s(e.third))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(e.fourth,e)}},[t._v(t._s(e.fourth))])])}),t._v(" "),t._l(15-t.table.length<0?0:15-t.table.length,function(e){return t.table.length<15?a("div",{staticClass:"middle-column",style:{width:t.columnWidth}},[a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"})]):t._e()})],2)},staticRenderFns:[]};var u=function(t){a("hPlN")},m=a("VU/8")(c.a,d,!1,u,"data-v-1a055d8f",null).exports,v=a("mF0L"),h=a("EbPM"),f=a("hCL4"),b={components:{MinimumFlowLine:a("G6gj").a,SearchMinimumByTimes:f.a,SelectMeter:h.a,MinimumTable:m},name:"minimum-flow-monitoring",data:function(){return{columns:[{name:"日期",prop:"date"},{name:"凌晨0-1",prop:"first"},{name:"凌晨1-2",prop:"second"},{name:"凌晨2-3",prop:"third"},{name:"凌晨3-4",prop:"fourth"}],tableData:[],title:"水表日最小流量检测数据",startTime:"",endTime:"",meterId:9,xData:[],yData:[],show:!1,tableShow:!1}},created:function(){var t=this.$route.query;void 0!==t.waterMeterId&&(this.meterId=t.waterMeterId);var e=this.$route.params;e.id&&(this.meterId=e.id)},methods:{change:function(t){this.show=!1,this.tableShow=!1,this.startTime=t.startTime,this.endTime=t.endTime,this.getMinimumInf()},selectMeter:function(t){this.show=!1,this.tableShow=!1,this.meterId=t.id,this.getMinimumInf()},getMinimumInf:function(){var t=this;return o()(l.a.mark(function e(){var a,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={watermeterid:t.meterId,starttime:t.startTime,endtime:t.endTime},e.next=3,t.$api.waterMeterData.findTimesMinFlow(a);case 3:(i=e.sent).data&&i.data.length>0?(t.getChartsData(i.data),t.getTableData(i.data)):(t.show=!0,t.tableShow=!0,t.xData=[],t.yData=[],t.tableData=[]);case 5:case"end":return e.stop()}},e,t)}))()},getChartsData:function(t){var e=[],a=[];t&&"object"==(void 0===t?"undefined":s()(t))&&t.length>0&&(t.forEach(function(t){e.push(t.time),a.push(t.data.filter(function(t){return t.status})[0].data)}),this.xData=e,this.yData=a,this.show=!0)},getTableData:function(t){var e=[];t&&"object"==(void 0===t?"undefined":s()(t))&&t.length>0&&(t.forEach(function(t){e.push({date:t.time,first:t.data[0].data,second:t.data[1].data,third:t.data[2].data,fourth:t.data[3].data})}),this.tableData=e,this.tableShow=!0)},exportData:function(){Object(v.a)(this.columns,this.tableData,this.title)}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("div",{staticClass:"content body"},[a("div",{staticClass:"box box-solid mini-charts"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("水表日最小流量监测图表")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.show,expression:"!show"}],staticClass:"box-body"},[a("div",{staticClass:"select-date"},[a("select-meter",{attrs:{meterId:t.meterId},on:{change:t.selectMeter}}),t._v(" "),a("search-minimum-by-times",{staticClass:"minimum",on:{change:t.change}})],1),t._v(" "),a("div",{staticClass:"charts-line"},[t.show?a("minimum-flow-line",{attrs:{xData:t.xData,yData:t.yData}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"box box-solid mini-table"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("水表日最小流量检测数据 "),a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.tableShow,expression:"!tableShow"}],staticClass:"mini-table-data"},[t.tableShow?a("minimum-table",{attrs:{tableData:t.tableData}}):t._e()],1)])])])])},staticRenderFns:[]};var _=a("VU/8")(b,w,!1,function(t){a("llSW")},"data-v-6d6d5ff0",null);e.default=_.exports},EbPM:function(t,e,a){"use strict";var i={name:"select-meter",data:function(){return{options:[],value:9}},created:function(){this.value=this.meterId,this.init()},props:{meterId:{type:Number}},methods:{init:function(){var t=this;this.$api.waterMeterInf.findALL().then(function(e){var a=e.map(function(t){return{value:t.id,label:t.name}});t.options=a})},change:function(){var t={id:this.value};this.$emit("change",t)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("b",[t._v("水表选择：")]),t._v(" "),a("el-select",{attrs:{filterable:"",placeholder:"请选择水表",size:"mini",type:"primary"},on:{change:t.change},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)},staticRenderFns:[]};var n=a("VU/8")(i,s,!1,function(t){a("MAGJ")},"data-v-62c44ebb",null);e.a=n.exports},MAGJ:function(t,e){},eshS:function(t,e,a){"use strict";(function(t){e.a={name:"minimum-table",data:function(){return{table:[{date:"2020-01-01",first:1e4,second:999,third:9999,four:1e3},{date:"2020-01-02",first:999,second:1e4,third:9999,four:1e3}]}},mounted:function(){this.table=this.tableData},props:{tableData:{type:Array}},methods:{selectMin:function(t,e){var a=!0;for(var i in e)Number(e[i])<Number(t)&&"date"!=i&&(a=!1);return a}},computed:{columnWidth:function(){return(t(document).width()-200)/this.tableData.length+"px"}}}}).call(e,a("7t+N"))},hPlN:function(t,e){},llSW:function(t,e){}});
//# sourceMappingURL=17.28342317fac937485c64.js.map