webpackJsonp([15],{"+vGM":function(a,e){},DrOm:function(a,e){},NorM:function(a,e){},QbcY:function(a,e){},VvB7:function(a,e){},f5zO:function(a,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=t("pFYg"),r=t.n(n),o=t("Xxa5"),i=t.n(o),s=t("exGp"),l=t.n(s),u=t("bOdI"),d=t.n(u),c={name:"table-data",data:function(){return{}},props:{tableColumn:{type:Array},tableData:{type:Array},show:{type:Boolean,default:!1}}},p={render:function(){var a=this.$createElement,e=this._self._c||a;return this.show?e("el-table",{attrs:{border:"",data:this.tableData,size:"mini",height:"100%"}},this._l(this.tableColumn,function(a,t){return e("el-table-column",{key:t,attrs:{label:a.name,prop:a.prop,align:"center","show-overflow-tooltip":"","min-width":"100"}})}),1):this._e()},staticRenderFns:[]};var m=t("VU/8")(c,p,!1,function(a){t("QbcY")},"data-v-20eeaf2a",null).exports,b=t("mF0L"),f={components:{TableData:m},name:"building",data:function(){var a;return a={show:!0,radio:"1",tableData:[],max:(new Date).getMonth(),tableColumn:[{name:"建筑名称",prop:"name"},{name:"当年计划定额",prop:"planQuota"},{name:"当年已用定额",prop:"usedQuota"},{name:"当年已用水",prop:"usedWater"},{name:"当年已节水",prop:"saving"},{name:"当年节水率",prop:"ratio"},{name:"定额下达部门",prop:"quotaDepartment"},{name:"定额责任人",prop:"quotaPersonLiable"}]},d()(a,"tableData",[{name:"武昌校区",currentYearQuota:1e3,currentYearUseQuota:100},{name:"武昌校区",currentYearQuota:1e3,currentYearUseQuota:100}]),d()(a,"year",(new Date).getFullYear()),d()(a,"title","建筑定额与节水概况"),a},mounted:function(){this.refresh()},methods:{labelHead:function(a,e){e.column,e.index},change:function(){this.show=!0,this.refresh()},refresh:function(){var a=this;return l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.year="1"==a.radio?(new Date).getFullYear():(new Date).getFullYear()-1,a.max=a.year==(new Date).getFullYear()?(new Date).getMonth():12,a.tableData=[],e.next=5,a.$api.buildingInf.findALL();case 5:(t=e.sent)?t.forEach(function(e){a.getTableData(e,t.length)}):a.show=!1;case 7:case"end":return e.stop()}},e,a)}))()},getTableData:function(a,e){var t=this;return l()(i.a.mark(function n(){var o,s,l,u,d,c,p,m,b,f,h,v;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={pageNum:1,pageSize:1e3,buildingid:a.id,yy:t.year},n.next=3,t.$api.buildingInf.findFlowPageYearMonth(o);case 3:return s=n.sent,o={quotayear:t.year,buildingid:a.id},n.next=7,t.$api.buildingQuota.findAll(o);case 7:if(l=!!(l=n.sent).data&&l.data[0],u=0,d=0,c=0,p=0,m=0,"object"==(void 0===a?"undefined":r()(a))){for(v=1;v<=12;v++)b="m"+v,v<=t.max&&(d+=l?l[b]:0,c+=s.data?s.data.list[v-1].data:0),u+=l?l[b]:0;p=d>0&&c>0?(d-c).toFixed(1):"--",m=d>0&&c>0?(p/d*100).toFixed(1)+"%":"--",d=Number(d.toFixed(1)),c=Number(c.toFixed(1)),u=Number(u.toFixed(1))}f=l&&l.editordepartment?l.editordepartment:"--",h=l&&l.editor?l.editor:"--",t.tableData.push({name:a.name,planQuota:u,usedQuota:d,usedWater:c,saving:p,ratio:m,quotaDepartment:f,quotaPersonLiable:h}),t.show=!(t.tableData.length==e);case 15:case"end":return n.stop()}},n,t)}))()},exportData:function(){Object(b.a)(this.tableColumn,this.tableData,this.title)}}},h={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.show,expression:"show"}],staticClass:"building-body"},[t("div",{staticClass:"building-radio"},[t("el-radio-group",{attrs:{size:"small"},on:{change:a.change},model:{value:a.radio,callback:function(e){a.radio=e},expression:"radio"}},[t("el-radio-button",{attrs:{label:"1"}},[a._v("今年")]),a._v(" "),t("el-radio-button",{attrs:{label:"2"}},[a._v("去年")])],1),a._v(" "),t("el-button",{staticClass:"upload",attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:a.exportData}},[a._v("导出")])],1),a._v(" "),t("div",{staticClass:"building-table"},[t("table-data",{attrs:{show:!a.show,tableColumn:a.tableColumn,tableData:a.tableData}})],1)])},staticRenderFns:[]};var v=t("VU/8")(f,h,!1,function(a){t("DrOm")},"data-v-26b7cb2c",null).exports,g={components:{TableData:m},name:"region",data:function(){var a;return a={show:!0,radio:"1",tableData:[],max:(new Date).getMonth(),tableColumn:[{name:"DMA名称",prop:"name"},{name:"当年计划定额",prop:"planQuota"},{name:"当年已用定额",prop:"usedQuota"},{name:"当年已用水",prop:"usedWater"},{name:"当年已节水",prop:"saving"},{name:"当年节水率",prop:"ratio"},{name:"定额下达部门",prop:"quotaDepartment"},{name:"定额责任人",prop:"quotaPersonLiable"}]},d()(a,"tableData",[{name:"武昌校区",currentYearQuota:1e3,currentYearUseQuota:100},{name:"武昌校区",currentYearQuota:1e3,currentYearUseQuota:100}]),d()(a,"year",(new Date).getFullYear()),d()(a,"title","DMA定额与节水概况"),a},mounted:function(){this.refresh()},methods:{labelHead:function(a,e){e.column,e.index},change:function(){this.show=!0,this.refresh()},refresh:function(){var a=this;return l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.year="1"==a.radio?(new Date).getFullYear():(new Date).getFullYear()-1,a.max=a.year==(new Date).getFullYear()?(new Date).getMonth():12,a.tableData=[],e.next=5,a.$api.regionInf.findAll();case 5:(t=e.sent)?(t=t.filter(function(a){return"DMA"==a.statisticstype})).forEach(function(e){a.getTableData(e,t.length)}):a.show=!1;case 7:case"end":return e.stop()}},e,a)}))()},getTableData:function(a,e){var t=this;return l()(i.a.mark(function n(){var o,s,l,u,d,c,p,m,b,f,h,v;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={pageNum:1,pageSize:1e3,waterregionid:a.id,yy:t.year},n.next=3,t.$api.regionInf.findFlowPageYearMonth(o);case 3:return s=n.sent,o={quotayear:t.year,waterregionid:a.id},n.next=7,t.$api.waterRegionQuota.findAll(o);case 7:if(l=!!(l=n.sent).data&&l.data[0],u=0,d=0,c=0,p=0,m=0,"object"==(void 0===a?"undefined":r()(a))){for(v=1;v<=12;v++)b="m"+v,v<=t.max&&(d+=l?l[b]:0,c+=s.data?s.data.list[v-1].data:0),u+=l?l[b]:0;p=d>0&&c>0?(d-c).toFixed(1):"--",m=d>0?(p/d*100).toFixed(1)+"%":"--",d=Number(d.toFixed(1)),c=Number(c.toFixed(1)),u=Number(u.toFixed(1))}f=l?l.editordepartment:"--",h=l?l.editor:"--",t.tableData.push({name:a.name,planQuota:u,usedQuota:d,usedWater:c,saving:p,ratio:m,quotaDepartment:f,quotaPersonLiable:h}),t.show=!(t.tableData.length==e);case 15:case"end":return n.stop()}},n,t)}))()},exportData:function(){Object(b.a)(this.tableColumn,this.tableData,this.title)}}},w={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.show,expression:"show"}],staticClass:"region-body"},[t("div",{staticClass:"region-radio"},[t("el-radio-group",{attrs:{size:"small"},on:{change:a.change},model:{value:a.radio,callback:function(e){a.radio=e},expression:"radio"}},[t("el-radio-button",{attrs:{label:"1"}},[a._v("今年")]),a._v(" "),t("el-radio-button",{attrs:{label:"2"}},[a._v("去年")])],1),a._v(" "),t("el-button",{staticClass:"upload",attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:a.exportData}},[a._v("导出")])],1),a._v(" "),t("div",{staticClass:"region-table"},[t("table-data",{attrs:{show:!a.show,tableColumn:a.tableColumn,tableData:a.tableData}})],1)])},staticRenderFns:[]};var x=t("VU/8")(g,w,!1,function(a){t("NorM")},"data-v-312c037c",null).exports,D={components:{TableData:m},name:"total-region",data:function(){var a;return a={show:!0,radio:"1",tableData:[],max:(new Date).getMonth(),tableColumn:[{name:"校区名称",prop:"name"},{name:"当年计划定额",prop:"planQuota"},{name:"当年已用定额",prop:"usedQuota"},{name:"当年已用水",prop:"usedWater"},{name:"当年已节水",prop:"saving"},{name:"当年节水率",prop:"ratio"},{name:"定额下达部门",prop:"quotaDepartment"},{name:"定额责任人",prop:"quotaPersonLiable"}]},d()(a,"tableData",[{name:"武昌校区",currentYearQuota:1e3,currentYearUseQuota:100},{name:"武昌校区",currentYearQuota:1e3,currentYearUseQuota:100}]),d()(a,"year",(new Date).getFullYear()),d()(a,"title","校区定额与节水概况"),a},mounted:function(){this.refresh()},methods:{labelHead:function(a,e){e.column,e.index},change:function(){this.show=!0,this.refresh()},refresh:function(){var a=this;return l()(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.year="1"==a.radio?(new Date).getFullYear():(new Date).getFullYear()-1,a.max=a.year==(new Date).getFullYear()?(new Date).getMonth():12,a.tableData=[],e.next=5,a.$api.regionInf.findAll();case 5:(t=e.sent)?(t=t.filter(function(a){return"REGION"==a.statisticstype})).forEach(function(e){a.getTableData(e,t.length)}):a.show=!1;case 7:case"end":return e.stop()}},e,a)}))()},getTableData:function(a,e){var t=this;return l()(i.a.mark(function n(){var o,s,l,u,d,c,p,m,b,f,h,v;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o={pageNum:1,pageSize:1e3,waterregionid:a.id,yy:t.year},n.next=3,t.$api.regionInf.findFlowPageYearMonth(o);case 3:return s=n.sent,o={quotayear:t.year,waterregionid:a.id},n.next=7,t.$api.waterRegionQuota.findAll(o);case 7:if(l=!!(l=n.sent).data&&l.data[0],u=0,d=0,c=0,p=0,m=0,"object"==(void 0===a?"undefined":r()(a))){for(v=1;v<=12;v++)b="m"+v,v<=t.max&&(d+=l?l[b]:0,c+=s.data?s.data.list[v-1].data:0),u+=l?l[b]:0;p=d>0&&c>0?(d-c).toFixed(1):"--",m=d>0?(p/d*100).toFixed(1)+"%":"--",d=Number(d.toFixed(1)),c=Number(c.toFixed(1)),u=Number(u.toFixed(1))}f=l?l.editordepartment:"--",h=l?l.editor:"--",t.tableData.push({name:a.name,planQuota:u,usedQuota:d,usedWater:c,saving:p,ratio:m,quotaDepartment:f,quotaPersonLiable:h}),t.show=!(t.tableData.length==e);case 15:case"end":return n.stop()}},n,t)}))()},exportData:function(){Object(b.a)(this.tableColumn,this.tableData,this.title)}}},y={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.show,expression:"show"}],staticClass:"total-region-body"},[t("div",{staticClass:"total-region-radio"},[t("el-radio-group",{attrs:{size:"small"},on:{change:a.change},model:{value:a.radio,callback:function(e){a.radio=e},expression:"radio"}},[t("el-radio-button",{attrs:{label:"1"}},[a._v("今年")]),a._v(" "),t("el-radio-button",{attrs:{label:"2"}},[a._v("去年")])],1),a._v(" "),t("el-button",{staticClass:"upload",attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:a.exportData}},[a._v("导出")])],1),a._v(" "),t("div",{staticClass:"total-region-table"},[t("table-data",{attrs:{show:!a.show,tableColumn:a.tableColumn,tableData:a.tableData}})],1)])},staticRenderFns:[]};var C=t("VU/8")(D,y,!1,function(a){t("+vGM")},"data-v-b1368da8",null).exports;t("mtWM"),t("mw3O");var _={components:{TotalRegion:C,Region:x,Building:v},name:"quota-water-saving",data:function(){return{}},mounted:function(){}},F={render:function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"flex"},[t("div",{staticClass:"content body"},[t("div",{staticClass:"row"},[t("div",{staticClass:"quota-left col-xs-6"},[t("div",{staticClass:"total box box-solid"},[t("div",{staticClass:"box-header bg-aqua"},[a._v("\n            校区定额与节水概况\n          ")]),a._v(" "),t("div",{staticClass:"box-body"},[t("total-region")],1)]),a._v(" "),t("div",{staticClass:"region box box-solid"},[t("div",{staticClass:"box-header bg-aqua"},[a._v("\n            DMA定额与节水概况\n          ")]),a._v(" "),t("div",{staticClass:"box-body"},[t("region")],1)])]),a._v(" "),t("div",{staticClass:"quota-right col-xs-6"},[t("div",{staticClass:"build box box-solid"},[t("div",{staticClass:"box-header bg-aqua"},[a._v("\n            建筑定额与节水概况\n          ")]),a._v(" "),t("div",{staticClass:"box-body"},[t("building")],1)])])])])])},staticRenderFns:[]};var Y=t("VU/8")(_,F,!1,function(a){t("VvB7")},"data-v-1c2e0d20",null);e.default=Y.exports}});
//# sourceMappingURL=15.5f6c1932224bc9597c3b.js.map