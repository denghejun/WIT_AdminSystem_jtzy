webpackJsonp([20],{C1Op:function(t,e){},IDIa:function(t,e,a){t.exports=a.p+"static/img/timg.f6d90a5.jpg"},O8hm:function(t,e){},gj4K:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"meters",data:function(){return{meters:[{name:"家属区水表",number:1e3,isOnline:!0},{name:"家属区水表",number:1e3,isOnline:!0}],changeSelectStyle:0,count:0}},mounted:function(){this.meters=this.metersData},props:{metersData:{type:Array},meterData:{type:Object}},watch:{metersData:{handler:function(t,e){this.changeSelectStyle=0,this.meters=this.metersData,0!=this.count&&this.scrollTo(0),this.count++}},meterData:{handler:function(t,e){var a=this,n=void 0;this.meters.forEach(function(e,s){e.id==t.row.id&&(n=s,a.changeSelectStyle=s)}),this.scrollTo(n)}}},methods:{link:function(t,e){this.changeSelectStyle=e;var a={row:t};this.$emit("link",a)},scrollTo:function(t){t>-1?document.getElementById("meters_"+t).scrollIntoView():this.$alert("水表不存在","提示")}}},s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"meters"},t._l(t.meters,function(e,s){return n("div",{key:s,ref:t.changeSelectStyle==s?"meters":"",refInFor:!0,staticClass:"meter",class:{changeStyle:t.changeSelectStyle==s},attrs:{id:"meters_"+s},on:{click:function(a){return t.link(e,s)}}},[n("img",{staticClass:"img",attrs:{src:a("IDIa"),alt:""}}),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"number"},[t._v(t._s(e.snumber))]),t._v(" "),n("div",{staticClass:"is-online"},[n("div",{class:e.isonline?"green":"red"}),t._v("\n      "+t._s(e.isonline?"在线":"不在线")+"\n    ")])])}),0)},staticRenderFns:[]};var i=a("VU/8")(n,s,!1,function(t){a("C1Op")},"data-v-d33bf170",null).exports,r={name:"meters-table",data:function(){return{table:[],tableColumn:[{name:"名称",prop:"name"},{name:"编号",prop:"snumber"},{name:"通讯编号",prop:"comno"},{name:"出厂编号",prop:"productsn"},{name:"材质",prop:"material"},{name:"规格",prop:"dimension"},{name:"口径",prop:"caliber"},{name:"安装地址",prop:"setaddress"}],columnWidth:"400px"}},mounted:function(){this.table=this.tableData,this.$refs.singleTable.setCurrentRow(this.table[0])},props:{tableData:{type:Array},rowData:{type:Object}},watch:{tableData:{handler:function(t,e){this.$refs.singleTable.setCurrentRow(t[0]),this.table=t,this.scrollTo(0)}},rowData:{handler:function(t,e){this.$refs.singleTable.setCurrentRow(t.row);var a=void 0;this.tableData.forEach(function(e,n){e.id==t.row.id&&(a=n)}),this.scrollTo(a)}}},methods:{rowClick:function(t,e,a){var n={row:t};this.$emit("rowClick",n)},rowClassName:function(t){t.row;return"row_"+t.rowIndex},scrollTo:function(t){-1!=t&&document.getElementsByClassName("row_"+t)[0].scrollIntoView()},locateMeter:function(t){var e=this,a=void 0,n=void 0,s=void 0;this.$api.waterMeterInf.findOne(t.id).then(function(t){a=t.name,n=t.tag.substring(1,t.tag.length-1).split(",")[0],s=t.tag.substring(1,t.tag.length-1).split(",")[1],e.$router.push({path:"/TestGL",query:{marker:{lng:n,lat:s},info:a}})})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"meter-table"},[a("el-table",{ref:"singleTable",attrs:{border:"","row-class-name":t.rowClassName,data:t.table,size:"mini",height:"100%","highlight-current-row":""},on:{"row-click":t.rowClick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80px",align:"center"}}),t._v(" "),t._l(t.tableColumn,function(e,n){return a("el-table-column",{key:n,attrs:{"show-overflow-tooltip":"",label:e.name,width:"安装地址"==e.name?t.columnWidth:"",prop:e.prop,align:"center","min-width":"120"}})}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"地图定位"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-location"},on:{click:function(a){return t.locateMeter(e.row)}}})]}}])})],2)],1)},staticRenderFns:[]};var l=a("VU/8")(r,o,!1,function(t){a("O8hm")},"data-v-528f88a2",null).exports,c=a("mF0L"),u={components:{MetersTable:l,Meters:i},name:"water-meter-operation-supervision",data:function(){return{input:"",select:"",radio:"1",more:"0",metersData:[],meterData:{},tableData:[],rowData:{},selectData:[],show:!1,toIndex:-1,count:0,meterId:-1,title:"水表基本信息",tableColumn:[{name:"名称",prop:"name"},{name:"编号",prop:"snumber"},{name:"通讯编号",prop:"comno"},{name:"出厂编号",prop:"productsn"},{name:"材质",prop:"material"},{name:"规格",prop:"dimension"},{name:"口径",prop:"caliber"},{name:"安装地址",prop:"setaddress"}]}},created:function(){this.getMetersInf()},methods:{link:function(t){this.count++,this.rowData={row:t.row,count:this.count},this.meterId=t.row.id},rowClick:function(t){this.count++,this.meterData={row:t.row,count:this.count},this.meterId=t.row.id},radioChange:function(){var t=void 0;switch(this.radio){case"1":t=this.selectData;break;case"2":t=this.selectData.filter(function(t){return t.isonline});break;case"3":t=this.selectData.filter(function(t){return!t.isonline})}this.metersData=t,this.tableData=t,this.meterId=t?t[0].id:""},toOtherPage:function(){var t=void 0;switch(this.more){case"1":t="WaterUseSupervision";break;case"2":t="MeterMinimumFlowMonitoring"}this.$router.push({name:t,params:{id:this.meterId}})},getMetersInf:function(){var t=this,e=void 0;this.$api.waterMeterInf.findALL().then(function(a){e=a||[],t.metersData=e,t.selectData=e,t.tableData=e,t.meterId=e?e[0].id:"",t.show=!0})},search:function(){var t=this,e={pageNum:1,pageSize:1e3,name:this.select,value:this.input};this.$api.waterMeterInf.searchWaterMeter(e).then(function(e){t.metersData=e.data.list,t.tableData=e.data.list,t.meterId=e.data.list[0].id})},exportData:function(){Object(c.a)(this.tableColumn,this.metersData,this.title)}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("div",{staticClass:"content body"},[a("div",{staticClass:"meter-icon"},[a("div",{staticClass:"box box-solid"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("水表用水监测图表")]),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticClass:"select-meter"},[a("el-input",{attrs:{placeholder:"请输入内容",size:"mini",autofocus:"true",clearable:""},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"查询水表"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"名称",value:"name"}}),t._v(" "),a("el-option",{attrs:{label:"编号",value:"snumber"}}),t._v(" "),a("el-option",{attrs:{label:"通讯编号",value:"comno"}}),t._v(" "),a("el-option",{attrs:{label:"出厂编号",value:"productsn"}}),t._v(" "),a("el-option",{attrs:{label:"材质",value:"material"}}),t._v(" "),a("el-option",{attrs:{label:"规格",value:"dimension"}}),t._v(" "),a("el-option",{attrs:{label:"口径",value:"caliber"}})],1),t._v(" "),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return e.stopPropagation(),t.search(e)}},slot:"append"})],1),t._v(" "),a("el-radio-group",{attrs:{type:"success",size:"mini"},on:{change:t.radioChange},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("全部水表")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("在线水表")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("离线水表")])],1),t._v(" "),a("el-radio-group",{staticClass:"more",attrs:{type:"success",size:"mini"},on:{change:t.toOtherPage},model:{value:t.more,callback:function(e){t.more=e},expression:"more"}},[a("el-radio-button",{attrs:{disabled:""}},[t._v(" 更多了解>> ")]),t._v(" "),a("el-radio-button",{attrs:{label:"1"}},[t._v("水表水量监控")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("水表最小流量监测")])],1)],1),t._v(" "),a("div",{staticClass:"show-meter"},[a("meters",{attrs:{metersData:t.metersData,meterData:t.meterData},on:{link:t.link}})],1)])])]),t._v(" "),a("div",{staticClass:"meter-table"},[a("div",{staticClass:"box box-solid"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("\n          水表基本详细\n          "),a("el-button",{staticClass:"down-load",attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"box-body"},[t.show?a("meters-table",{attrs:{rowData:t.rowData,tableData:t.tableData},on:{rowClick:t.rowClick}}):t._e()],1)])])])])},staticRenderFns:[]};var d=a("VU/8")(u,m,!1,function(t){a("qTtR")},"data-v-3e2972da",null);e.default=d.exports},qTtR:function(t,e){}});
//# sourceMappingURL=20.28f5b5413990fa0e4bde.js.map