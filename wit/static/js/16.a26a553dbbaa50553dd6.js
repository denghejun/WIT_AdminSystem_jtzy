webpackJsonp([16],{JBos:function(t,e){},N7Ef:function(t,e){},PXMk:function(t,e){},QlHc:function(t,e){},tcAE:function(t,e,a){var o,n,i,r;r=function(t,e){var a;if(!e)return a="ECharts is not Loaded",void("undefined"!=typeof console&&console&&console.error&&console.error(a));var o=["#2ec7c9","#b6a2de","#5ab1ef","#ffb980","#d87a80","#8d98b3","#e5cf0d","#97b552","#95706d","#dc69aa","#07a2a4","#9a7fd1","#588dd5","#f5994e","#c05050","#59678c","#c9ab00","#7eb00a","#6f5553","#c14089"],n={color:o,title:{textStyle:{fontWeight:"normal",color:"#008acd"}},visualMap:{itemWidth:15,color:["#5ab1ef","#e0ffff"]},toolbox:{iconStyle:{normal:{borderColor:o[0]}}},tooltip:{backgroundColor:"rgba(50,50,50,0.5)",axisPointer:{type:"line",lineStyle:{color:"#008acd"},crossStyle:{color:"#008acd"},shadowStyle:{color:"rgba(200,200,200,0.2)"}}},dataZoom:{dataBackgroundColor:"#efefff",fillerColor:"rgba(182,162,222,0.2)",handleColor:"#008acd"},grid:{borderColor:"#eee"},categoryAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitLine:{lineStyle:{color:["#eee"]}}},valueAxis:{axisLine:{lineStyle:{color:"#008acd"}},splitArea:{show:!0,areaStyle:{color:["rgba(250,250,250,0.1)","rgba(200,200,200,0.1)"]}},splitLine:{lineStyle:{color:["#eee"]}}},timeline:{lineStyle:{color:"#008acd"},controlStyle:{normal:{color:"#008acd"},emphasis:{color:"#008acd"}},symbol:"emptyCircle",symbolSize:3},line:{smooth:!0,symbol:"emptyCircle",symbolSize:3},candlestick:{itemStyle:{normal:{color:"#d87a80",color0:"#2ec7c9",lineStyle:{color:"#d87a80",color0:"#2ec7c9"}}}},scatter:{symbol:"circle",symbolSize:4},map:{label:{normal:{textStyle:{color:"#d87a80"}}},itemStyle:{normal:{borderColor:"#eee",areaColor:"#ddd"},emphasis:{areaColor:"#fe994e"}}},graph:{color:o},gauge:{axisLine:{lineStyle:{color:[[.2,"#2ec7c9"],[.8,"#5ab1ef"],[1,"#d87a80"]],width:10}},axisTick:{splitNumber:10,length:15,lineStyle:{color:"auto"}},splitLine:{length:22,lineStyle:{color:"auto"}},pointer:{width:5}}};e.registerTheme("macarons",n)},n=[e,a("XLwt")],void 0===(i="function"==typeof(o=r)?o.apply(e,n):o)||(t.exports=i)},xRnA:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("sE1n");a("XLwt"),a("tcAE");a("cyXY");var n={components:{"v-chart":o.a},name:"type-pie-chart",data:function(){return{polar:{title:{text:"",x:"center",textStyle:{fontStyle:"bolder"}},toolbox:{show:!0,right:30,top:"10px",feature:{saveAsImage:{}}},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},graphic:[{type:"text",left:"center",top:"40%",style:{text:"过去31天\n\n建筑用水分类统计",textAlign:"center",fill:"#007CDE",width:30,height:30,fontSize:25,fontWeight:"bolder",fontFamily:"Microsoft YaHei"}}],grid:{left:"10%",right:"4%",top:"3%",containLabel:!0},legend:{show:!0,orient:"horizontal",bottom:"10px",textStyle:{fontSize:30}},series:[{name:"用水量(吨)",type:"pie",radius:["40% ","60%"],center:["50%","45%"],label:{normal:{formatter:function(t,e,a){return t.name+"\n"+t.value+"\n"+t.percent.toFixed(1)+"%"},textStyle:{fontSize:16}}},data:[{value:1e3,name:"场馆类建筑"},{value:200,name:"食堂餐厅"},{value:2e3,name:"图书馆建筑"},{value:100,name:"教学楼建筑"},{value:1200,name:"实验室"},{value:1500,name:"学生宿舍"},{value:1800,name:"综合楼建筑"},{value:300,name:"医院"},{value:300,name:"医院1"},{value:300,name:"医院2"},{value:300,name:"医院3"},{value:300,name:"医院4"},{value:300,name:"医院5"},{value:300,name:"医院6"},{value:300,name:"医院7"},{value:300,name:"医院8"},{value:300,name:"医院9"},{value:300,name:"医院10"}],itemStyle:{normal:{color:function(t){return["#51b447","#ffe1c5","#7EC0EE","#FF9F7F","#FFD700","#C9C9C9","#E066FF","#C0FF3E","#DDA9FF","#88FFBE","#FF6BFB"][t.dataIndex]}}}}]}}},created:function(){this.polar.series[0].data=this.chartData;var t=this.polar.series[0].data.length,e=[],a=20,o=100-3*(t=t%3==0?t/3:parseInt(t/3)+1);this.polar.series[0].data.forEach(function(t,n){n%3==0&&0!=n&&(o+=3,a=20),e.push({orient:"horizontal",x:a+"%",y:o+"%",show:!0,align:"left",data:[t.name],textStyle:{fontSize:14}}),a+=25}),this.polar.legend=e},mounted:function(){this.polar.graphic[0].style.text=this.text+"\n\n建筑用水分类统计"},props:{toHeight:{type:String,default:"100%"},toWidth:{type:String,default:"100%"},titleName:{type:String},titleData:{type:Array},chartData:{type:Array},text:{type:String}},watch:{text:{handler:function(t,e){this.polar.graphic[0].style.text=t+"\n\n建筑用水分类统计"}},titleData:{handler:function(t,e){this.polar.legend.data=t}},chartData:{handler:function(t,e){this.polar.series[0].data=t}}}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticStyle:{height:"100%",width:"100%","text-align":"center"}},[e("v-chart",{style:{height:this.toHeight,width:this.toWidth},attrs:{theme:"infographic",options:this.polar}})],1)},staticRenderFns:[]};var r=a("VU/8")(n,i,!1,function(t){a("JBos")},"data-v-d26c1318",null).exports,l={name:"type-table",data:function(){return{table:[{type:"场馆类建筑",flow:1e3,ratio:"12.7%"},{type:"食堂餐厅",flow:200,ratio:"2.5%"},{type:"图书馆建筑",flow:2e3,ratio:"24.7%"},{type:"教学楼建筑",flow:100,ratio:"1.2%"},{type:"实验室",flow:1200,ratio:"14.8%"},{type:"学生宿舍",flow:1500,ratio:"18.5%"},{type:"综合楼建筑",flow:1800,ratio:"22.2%"},{type:"医院",flow:300,ratio:"3.7%"},{type:"医院1",flow:300,ratio:"3.7%"},{type:"医院2",flow:300,ratio:"3.7%"},{type:"医院3",flow:300,ratio:"3.7%"},{type:"医院4",flow:300,ratio:"3.7%"},{type:"医院5",flow:300,ratio:"3.7%"},{type:"医院6",flow:300,ratio:"3.7%"},{type:"医院7",flow:300,ratio:"3.7%"},{type:"医院8",flow:300,ratio:"3.7%"},{type:"医院9",flow:300,ratio:"3.7%"},{type:"医院10",flow:300,ratio:"3.7%"}],tableColumn:[{name:"建筑类型",prop:"type"},{name:"总用水量(吨)",prop:"flow"},{name:"所占比例(%)",prop:"ratio"}]}},props:{tableData:{type:Array}},mounted:function(){this.table=this.tableData},watch:{tableData:{handler:function(t,e){this.table=t}}},methods:{rowStyle:function(t){t.row,t.rowIndex;return"height: 50px"}}},s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"type-table"},[e("el-table",{attrs:{border:"",data:this.table,size:"mini",height:"100%","row-style":this.rowStyle}},[e("el-table-column",{attrs:{type:"index",label:"序号",width:"100px",align:"center"}}),this._v(" "),this._l(this.tableColumn,function(t,a){return e("el-table-column",{key:a,attrs:{label:t.name,prop:t.prop,align:"center"}})})],2)],1)},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(t){a("PXMk")},"data-v-21ee1b97",null).exports,d=a("pFYg"),m=a.n(d),p={components:{SearchByHours:a("tw2w").a},name:"trend-date",data:function(){return{radio:1,command:1,type:0,count:0}},mounted:function(){this.link(1)},methods:{firstCommand:function(t){var e=new Date,a=void 0,o=void 0;switch(t){case"1":a=new Date(e.getTime()-6048e5),o="近1周";break;case"2":a=new Date(e.getTime()-12096e5),o="近2周";break;case"3":a=new Date(e.getTime()-18144e5),o="近3周"}this.$emit("searchTimes",{start:this.format(a),end:this.format(e),text:o,type:1})},secondCommand:function(t){var e=new Date,a=void 0,o=void 0;switch(t){case"1":a=new Date(e.getTime()-2592e6),o="近1月";break;case"2":a=new Date(e.getTime()-5184e6),o="近2月";break;case"3":a=new Date(e.getTime()-7776e6),o="近3月"}this.$emit("searchTimes",{start:this.format(a),end:this.format(e),text:o,type:1})},thirdCommand:function(t){var e=new Date,a=void 0,o=void 0;switch(t){case"1":a=e.getFullYear(),o="今年";break;case"2":a=e.getFullYear()-1,o="去年"}this.$emit("searchTimes",{yy:a,text:o,type:2})},link:function(t){if(this.type!=t)switch(this.type=t,t){case 1:this.firstCommand("1");break;case 2:this.secondCommand("1");break;case 3:this.thirdCommand("1")}this.radio=t},changeHour:function(t){var e=t.start.split(" ")[0],a=t.end.split(" ")[0];this.$emit("searchTimes",{start:e,end:a,text:e+"~"+a,type:1})},format:function(t){if("object"==(void 0===t?"undefined":m()(t))&&t instanceof Date){var e=(t=new Date(t)).getFullYear(),a=t.getMonth();a=a<10?"0"+a:a;var o=t.getDate();o=o<10?"0"+o:o;var n=t.getHours();t=e+"-"+a+"-"+o+" "+(n=n<10?"0"+n:n)}return t}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-date"},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.firstCommand}},[a("el-button",{attrs:{type:1==t.radio?"primary":"normal",size:"mini"},on:{click:function(e){return t.link(1)}}},[t._v("\n      周选择"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("近1周")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("近2周")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"3"}},[t._v("近3周")])],1)],1),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.secondCommand}},[a("el-button",{attrs:{type:2==t.radio?"primary":"normal",size:"mini"},on:{click:function(e){return t.link(2)}}},[t._v("\n      月选择"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("近1月")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("近2月")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"3"}},[t._v("近3月")])],1)],1),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.thirdCommand}},[a("el-button",{attrs:{type:3==t.radio?"primary":"normal",size:"mini"},on:{click:function(e){return t.link(3)}}},[t._v("\n      年选择"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"1"}},[t._v("今年")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"2"}},[t._v("去年")])],1)],1),t._v(" "),a("el-button",{attrs:{size:"mini",type:4==t.radio?"primary":"normal"},on:{click:function(e){return t.link(4)}}},[t._v("时间区间")]),t._v(" "),4==t.radio?a("search-by-hours",{on:{change:t.changeHour}}):t._e()],1)},staticRenderFns:[]};var u=a("VU/8")(p,h,!1,function(t){a("N7Ef")},"data-v-1bda9005",null).exports,f=a("mF0L"),y={components:{TrendDate:u,TypeTable:c,TypePieChart:r},name:"water-use-classify",data:function(){return{radio:"1",chartData:[],tableData:[],text:"",show:!1,columns:[{name:"序号",prop:"index"},{name:"建筑类型",prop:"type"},{name:"总用水量(吨)",prop:"flow"},{name:"所占比例(%)",prop:"ratio"}],title:"建筑用水综合分类统计报表"}},methods:{searchTimes:function(t){var e=this;this.show=!1,this.text=t.text;var a=void 0;1==t.type?this.$api.buildingInf.findCategoryFlowTwoTimes({starttime:t.start,endtime:t.end}).then(function(t){a=t.data?t.data:[],e.getChartsData(a),e.getTableData(a)}):this.$api.buildingInf.findCategoryFlowAnyYear({yy:t.yy}).then(function(t){a=t.data?t.data:[],e.getChartsData(a),e.getTableData(a)})},getTableData:function(t){var e=[],a=0;(t=t.filter(function(t){return 0!=t.data}))instanceof Array&&t.length>0&&t.forEach(function(t){a+=Number(t.data),e.push({type:t.name,flow:Number(t.data)})}),e=e.map(function(t,e){return{index:e+1,type:t.type,flow:t.flow.toFixed(1),ratio:Number(t.flow/a*100).toFixed(1)}}),this.tableData=e},getChartsData:function(t){var e=[];(t=t.filter(function(t){return 0!=t.data}))instanceof Array&&t.length>0&&(e=t.map(function(t){return{name:t.name,value:t.data}})),this.chartData=e,this.show=!0},exportData:function(){Object(f.a)(this.columns,this.tableData,this.title)}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("div",{staticClass:"content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"box box-solid"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("建筑用水综合分类饼图")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.show,expression:"!show"}],staticClass:"box-body"},[a("trend-date",{on:{searchTimes:t.searchTimes}}),t._v(" "),a("div",{staticClass:"type-line"},[t.show?a("type-pie-chart",{attrs:{text:t.text,chartData:t.chartData}}):t._e()],1)],1)])]),t._v(" "),a("div",{staticClass:"col-xs-6"},[a("div",{staticClass:"box box-solid"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("\n            建筑用水综合分类统计报表\n            "),a("el-button",{staticClass:"down-load",attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.show,expression:"!show"}],staticClass:"box-body"},[a("type-table",{attrs:{tableData:t.tableData}})],1)])])])])])},staticRenderFns:[]};var w=a("VU/8")(y,v,!1,function(t){a("QlHc")},"data-v-21f6afb8",null);e.default=w.exports}});
//# sourceMappingURL=16.a26a553dbbaa50553dd6.js.map