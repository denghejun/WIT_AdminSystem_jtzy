webpackJsonp([43],{e4DE:function(e,t){},fwyf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l={data:function(){return{addDialog:!1,editDialog:!1,tableData:[],show:!1,ruleForm:{id:"",category:"",totalstandard:"",leaststandard:"",addtotalindex:"",addrangetotalindex:"",addminindex:"",addrangeminindex:"",leakagindexalarm:""},rules:{totalstandard:[{required:!0,message:"总量增量基准量",trigger:"blur"}],leaststandard:[{required:!0,message:"最小流量增量基准量",trigger:"blur"}],addtotalindex:[{required:!0,message:"日量隔周增量指数系数",trigger:"blur"}],addrangetotalindex:[{required:!0,message:"日量隔周增幅指数系数",trigger:"blur"}],addminindex:[{required:!0,message:"最小量隔周增量指数系数",trigger:"blur"}],addrangeminindex:[{required:!0,message:"最小量隔周增幅指数系数",trigger:"blur"}],leakagindexalarm:[{required:!0,message:"综合指数报警限值",trigger:"blur"}]}}},created:function(){this.refresh()},methods:{exportExcel:function(){var e=this.xlsx.utils.table_to_book(document.querySelector("#out-table")),t=this.xlsx.write(e,{bookType:"xlsx",bookSST:!0,type:"array"});try{this.fileSaver.saveAs(new Blob([t],{type:"application/octet-stream"}),"漏损指数信息.xlsx")}catch(e){"undefined"!=typeof console&&console.log(e,t)}return t},refresh:function(){var e=this;this.$api.leakageIndex.findAllLeakageIndex().then(function(t){e.tableData=t.data})},editForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a=t.qs.stringify(t.ruleForm);t.$api.leakageIndex.updateLeakageIndex(a).then(function(e){"ok"===e.msg?(t.editDialog=!1,t.$message({type:"success",message:"修改成功！"}),t.refresh()):t.$message({type:"error",message:"您的账号权限不足！"})})})},handleEdit:function(e,t){var a=this;this.tableData.forEach(function(e){e.id==t.id&&(a.ruleForm=e)}),this.refresh()}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex"},[a("el-dialog",{attrs:{title:"修改漏损指标信息",visible:e.editDialog,width:"800px",top:"5%","modal-append-to-body":!1},on:{"update:visible":function(t){e.editDialog=t}}},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px",size:"medium"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-xs-5"},[a("el-form-item",{attrs:{label:"总量增量基准量",prop:"totalstandard"}},[a("el-input",{model:{value:e.ruleForm.totalstandard,callback:function(t){e.$set(e.ruleForm,"totalstandard",t)},expression:"ruleForm.totalstandard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最小流量增量基准量",prop:"leaststandard"}},[a("el-input",{model:{value:e.ruleForm.leaststandard,callback:function(t){e.$set(e.ruleForm,"leaststandard",t)},expression:"ruleForm.leaststandard"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日量隔周增量指数系数",prop:"addtotalindex"}},[a("el-input",{model:{value:e.ruleForm.addtotalindex,callback:function(t){e.$set(e.ruleForm,"addtotalindex",t)},expression:"ruleForm.addtotalindex"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"日量隔周增幅指数系数",prop:"addrangetotalindex"}},[a("el-input",{model:{value:e.ruleForm.addrangetotalindex,callback:function(t){e.$set(e.ruleForm,"addrangetotalindex",t)},expression:"ruleForm.addrangetotalindex"}})],1)],1),e._v(" "),a("div",{staticClass:"col-xs-5"},[a("el-form-item",{attrs:{label:"最小量隔周增量指数系数",prop:"addminindex"}},[a("el-input",{model:{value:e.ruleForm.addminindex,callback:function(t){e.$set(e.ruleForm,"addminindex",t)},expression:"ruleForm.addminindex"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"最小量隔周增幅指数系数",prop:"addrangeminindex"}},[a("el-input",{model:{value:e.ruleForm.addrangeminindex,callback:function(t){e.$set(e.ruleForm,"addrangeminindex",t)},expression:"ruleForm.addrangeminindex"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"综合指数报警限值",prop:"leakagindexalarm"}},[a("el-input",{model:{value:e.ruleForm.leakagindexalarm,callback:function(t){e.$set(e.ruleForm,"leakagindexalarm",t)},expression:"ruleForm.leakagindexalarm"}})],1)],1)])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.editDialog=!1}}},[e._v(" 取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editForm("ruleForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-header bg-aqua"},[e._v("漏损信息管理")]),e._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticStyle:{"margin-bottom":"10px"}},[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download"},on:{click:function(t){return t.stopPropagation(),e.exportExcel(t)}}},[e._v("报表导出")])],1),e._v(" "),a("el-table",{attrs:{size:"mini",data:e.tableData,stripe:"",id:"out-table",border:"","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{type:"index",fixed:"",label:"序号"}}),e._v(" "),e.show?a("el-table-column",{attrs:{prop:"id"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"category",fixed:"",label:"类别"},scopedSlots:e._u([{key:"default",fn:function(t){return[10==t.row.category?a("h6",[e._v("水表")]):e._e(),e._v(" "),20==t.row.category?a("h6",[e._v("建筑")]):e._e(),e._v(" "),30==t.row.category?a("h6",[e._v("DMA")]):e._e(),e._v(" "),40==t.row.category?a("h6",[e._v("校区")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalstandard",label:"总量增量基准量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leaststandard",label:"最小流量增量基准量"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addtotalindex",label:"日量隔周增量指数系数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addrangetotalindex",label:"日量隔周增幅指数系数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addminindex",label:"最小量隔周增量指数系数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addrangeminindex",label:"最小量隔周增幅指数系数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"leakagindexalarm",label:"综合指数报警限值"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(a){e.handleEdit(t.$index,t.row),e.editDialog=!0}}},[e._v("编辑")])]}}])})],1)],1)])])],1)},staticRenderFns:[]};var o=a("VU/8")(l,r,!1,function(e){a("e4DE")},"data-v-2f4f17e5",null);t.default=o.exports}});
//# sourceMappingURL=43.b0d84cfdf8c2f36fdd79.js.map