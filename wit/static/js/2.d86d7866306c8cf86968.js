webpackJsonp([2],{"//T2":function(t,e){},"53Dk":function(t,e){},BZWr:function(t,e){},"D/wN":function(t,e){},DVG4:function(t,e,a){"use strict";var r={name:"maintenance-transfer",data:function(){return{tableData:{},id:""}},mounted:function(){this.id=this.alarmId,this.getTableData()},props:{alarmId:{type:String}},methods:{getTableData:function(){var t=this;console.log(this.id),this.$api.alarm.transferDispatch({alarmCode:this.id}).then(function(e){console.log(e);var a=e.data;a.oldImage="data:image/jpg;base64,"+a.oldImage,a.newImage="data:image/jpg;base64,"+a.newImage,t.tableData=a})}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"print-table"},[t._m(0),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("编号")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.alarmCode))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("转派时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.transferTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("维修地址")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchTime))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("处理单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalDepartment))]),t._v(" "),a("td",[t._v("联系电话")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.telephone))])]),t._v(" "),a("tr",{staticClass:"explain"},[a("td",{attrs:{colspan:"2"}},[t._v("维修简况说明")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.explain))])]),t._v(" "),t._m(1),t._v(" "),a("tr",{staticClass:"pic"},[a("td",{staticClass:"bottom-left",attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.oldImage}})]),t._v(" "),a("td",{staticClass:"bottom-right",attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.newImage}})])]),t._v(" "),a("tr",[a("td",[t._v("管道材质")]),t._v(" "),a("td",[t._v(t._s(t.tableData.material))]),t._v(" "),a("td",[t._v("管径(mm)")]),t._v(" "),a("td",[t._v(t._s(t.tableData.caliber))]),t._v(" "),a("td",[t._v("漏水部位")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.position))])]),t._v(" "),a("tr",[a("td",[t._v("路面结构")]),t._v(" "),a("td",[t._v(t._s(t.tableData.structure))]),t._v(" "),a("td",{staticClass:"t"},[t._v("管顶埋深(m)")]),t._v(" "),a("td",[t._v(t._s(t.tableData.setDepth))]),t._v(" "),a("td",[t._v("漏水估量(吨/天)")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.estimate))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("漏损简析")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.leakExplain))])]),t._v(" "),a("tr",[a("td",[t._v("处理结果")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposalOpinion?"已修复":"未修复"))]),t._v(" "),a("td",[t._v("出单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposaler))]),t._v(" "),a("td",[t._v("回单时间")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.disposalTime))])]),t._v(" "),a("tr",[a("td",[t._v("验收意见")]),t._v(" "),a("td",[t._v(t._s(t.tableData.checkOpinion?"同意":"不同意"))]),t._v(" "),a("td",[t._v("验收人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.checker))]),t._v(" "),a("td",[t._v("验收时间")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.checkTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("处理状态")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.status))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.remark))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"first-row"},[e("td",{attrs:{colspan:"8"}},[this._v("维修转派单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"pic-title"},[e("td",{staticClass:"top-left",attrs:{colspan:"4"}},[this._v("维修前照片")]),this._v(" "),e("td",{staticClass:"top-right",attrs:{colspan:"4"}},[this._v("维修后照片")])])}]};var l=a("VU/8")(r,s,!1,function(t){a("LfIv")},"data-v-d540fa0a",null).exports,i={name:"troubleshooting",data:function(){return{tableData:{},id:{}}},mounted:function(){this.id=this.alarmId,this.getTableData()},props:{alarmId:{type:String}},methods:{getTableData:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;a.newImage="data:image/jpg;base64,"+a.newImage,a.oldImage="data:image/jpg;base64,"+a.oldImage,a.category="设备故障",t.tableData=a})}}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"print-table"},[t._m(0),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("编号")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("报警时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警类型")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.category))])]),t._v(" "),a("tr",{staticClass:"explain"},[a("td",{attrs:{colspan:"2"}},[t._v("故障简述")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.reportContent))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchTime))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("处理单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalDepartment))]),t._v(" "),a("td",[t._v("联系电话")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.telephone))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("维修简况说明")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.explain))])]),t._v(" "),t._m(1),t._v(" "),a("tr",{staticClass:"pic"},[a("td",{staticClass:"bottom-left",attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.oldImage}})]),t._v(" "),a("td",{staticClass:"bottom-right",attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.newImage}})])]),t._v(" "),a("tr",[a("td",[t._v("处理结果")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposalOpinion?"正常":"异常"))]),t._v(" "),a("td",[t._v("出单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposaler))]),t._v(" "),a("td",[t._v("回单时间")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.disposalTime))])]),t._v(" "),a("tr",[a("td",[t._v("验收意见")]),t._v(" "),a("td",[t._v(t._s(t.tableData.checkOpinion?"同意":"不同意"))]),t._v(" "),a("td",[t._v("验收人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.checker))]),t._v(" "),a("td",[t._v("验收时间")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.checkTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("处理状态")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.status))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.remark))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"first-row"},[e("td",{attrs:{colspan:"8"}},[this._v("故障处理单")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"pic-title"},[e("td",{staticClass:"top-left",attrs:{colspan:"4"}},[this._v("维修前照片")]),this._v(" "),e("td",{staticClass:"top-right",attrs:{colspan:"4"}},[this._v("维修后照片")])])}]};var n=a("VU/8")(i,o,!1,function(t){a("a9RS")},"data-v-ddeca450",null).exports,c={name:"leakage-survey",data:function(){return{tableData:{},id:""}},mounted:function(){this.id=this.alarmId,this.getTableData()},props:{alarmId:{type:String}},methods:{getTableData:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;switch(a.category){case"10":a.category="水表漏损";break;case"20":a.category="建筑漏损";break;case"30":a.category="DMA漏损";break;case"40":a.category="校区漏损"}a.image="data:image/jpg;base64,"+a.image,t.tableData=a})}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("table",{staticClass:"print-table"},[t._m(0),t._v(" "),a("tr",[a("td",{staticClass:"fs",attrs:{colspan:"2"}},[t._v("编号")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("报警时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警类型")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.category))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("综合漏损指数")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.leakageIndex))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("隔周日用水量增量")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addTotal))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("隔周最小流量增量")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addMin))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("隔周日用水量增幅")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addRangeTotal))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("隔周最小流量增幅")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addRangeMin))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchTime))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("处理单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalDepartment))]),t._v(" "),a("td",[t._v("联系电话")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.telephone))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("勘察简况类型")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.leakageCategory))])]),t._v(" "),a("tr",{staticClass:"explain"},[a("td",{attrs:{colspan:"2"}},[t._v("勘察简况说明")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.explain))])]),t._v(" "),a("tr",{staticClass:"pic"},[a("td",{attrs:{colspan:"2"}},[t._v("勘察简况照片")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.image}})])]),t._v(" "),a("tr",[a("td",[t._v("处理结果")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposalOpinion?"需转派":"无需转派"))]),t._v(" "),a("td",[t._v("出单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposaler))]),t._v(" "),a("td",[t._v("回单时间")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.disposalTime))])]),t._v(" "),a("tr",[a("td",[t._v("验收意见")]),t._v(" "),a("td",[t._v(t._s(t.tableData.checkOpinion?"同意":"不同意"))]),t._v(" "),a("td",[t._v("验收人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.checker))]),t._v(" "),a("td",[t._v("验收时间")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.checkTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("处理状态")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.status))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.remark))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",{staticClass:"first-row"},[e("td",{attrs:{colspan:"8"}},[this._v("漏损勘察单")])])}]};var p={components:{LeakageSurvey:a("VU/8")(c,d,!1,function(t){a("uKY/")},"data-v-6711566b",null).exports,Troubleshooting:n,MaintenanceTransfer:l},name:"print-dialog",data:function(){return{dialogVisible:!1,id:""}},props:{isOpen:{type:Boolean,default:!1},status:{type:Number},alarmId:{type:String}},watch:{isOpen:{handler:function(t,e){this.dialogVisible=t}},alarmId:{handler:function(t,e){this.id=t}}},methods:{handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changePrint",{isOpen:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changePrint",{isOpen:!1})},printClick:function(){var t=document.getElementById("table-content").innerHTML,e=document.body.innerHTML;document.body.innerHTML=t,document.body.style.textAlign="center",window.print(),window.location.reload(),document.body.innerHTML=e}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"print-dialog",attrs:{top:"5vh",visible:t.dialogVisible,"modal-append-to-body":!1,width:"680px",height:"900px","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("div",{attrs:{id:"table-content"}},[1==t.status?a("leakage-survey",{attrs:{alarmId:t.id}}):t._e(),t._v(" "),2==t.status?a("maintenance-transfer",{attrs:{alarmId:t.id}}):t._e(),t._v(" "),3==t.status?a("troubleshooting",{attrs:{alarmId:t.id}}):t._e()],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.printClick}},[t._v("打印")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(p,m,!1,function(t){a("X+W+")},"data-v-4b71da7f",null);e.a=u.exports},EUHi:function(t,e){},G5Yn:function(t,e){},LfIv:function(t,e){},TASZ:function(t,e){},U7Jb:function(t,e){},"X+W+":function(t,e){},XQ1L:function(t,e){},ZlY5:function(t,e){},a9RS:function(t,e){},cHs5:function(t,e){},gy40:function(t,e){},hyeV:function(t,e){},pVvX:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"select-times",data:function(){return{radio:"1",value:""}},created:function(){this.change()},methods:{changeTimes:function(){var t=this.value;this.$emit("changeTimes",{start:t[0],end:t[1]})},change:function(){var t=new Date,e=t.getTime();switch(this.radio){case"1":e=new Date(e-864e5);break;case"2":e=new Date(e-1728e5);break;case"3":e=new Date(e-2592e5)}this.$emit("changeTimes",{start:this.format(e),end:this.format(t)})},format:function(t){var e=(t=new Date(t)).getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();return e+"-"+a+"-"+r+" "+s+":"+l+":"+(i=i<10?"0"+i:i)}}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"select-times"},[a("el-radio-group",{attrs:{type:"success",size:"mini"},on:{change:t.change},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("24小时")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("48小时")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("72小时")]),t._v(" "),a("el-radio-button",{attrs:{label:"4"}},[t._v("时间区段")])],1),t._v(" "),"4"==t.radio?a("el-date-picker",{staticStyle:{width:"200px","padding-bottom":"5px","padding-top":"5px","padding-left":"10px"},attrs:{size:"mini",type:"daterange","value-format":"yyyy-MM-dd","range-separator":"——","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.changeTimes},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e()],1)},staticRenderFns:[]};var l=a("VU/8")(r,s,!1,function(t){a("U7Jb")},"data-v-ddf2b77e",null).exports,i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-radio-group",{attrs:{size:"mini",fill:"#67C23A"},on:{change:t.change},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"1"}},[t._v("全部")]),t._v(" "),a("el-radio-button",{attrs:{label:"2"}},[t._v("校区漏损")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("DMA漏损")]),t._v(" "),a("el-radio-button",{attrs:{label:"4"}},[t._v("建筑漏损")]),t._v(" "),a("el-radio-button",{attrs:{label:"5"}},[t._v("表具漏损")]),t._v(" "),a("el-radio-button",{attrs:{label:"6"}},[t._v("设备故障")])],1)},staticRenderFns:[]};var o=a("VU/8")({name:"select-alarm-type",data:function(){return{radio:"1"}},methods:{change:function(){var t={type:""};switch(this.radio){case"1":t.type="";break;case"2":t.type="40";break;case"3":t.type="30";break;case"4":t.type="20";break;case"5":t.type="10";break;default:t.type="50"}this.$emit("changeType",t)}}},i,!1,function(t){a("BZWr")},"data-v-3364908c",null).exports,n=a("DVG4"),c={name:"survey-dispatch",data:function(){return{ruleForm:{dispatchDepartment:"",dispatcher:"",implementer:"",dispatchTime:""},rules:{dispatchDepartment:[{required:!0,message:"请输入派单单位",trigger:"blur"}],dispatcher:[{required:!0,message:"请输入派单人",trigger:"blur"}],implementer:[{required:!0,message:"请输入指定执行人",trigger:"blur"}],dispatchTime:[{required:!0,message:"请输入派单时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]},dispatchVisible:!1,tableData:{},id:"",show:!1}},created:function(){this.ruleForm.dispatcher=this.userName},props:{dispatchFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{dispatchFlag:{handler:function(t,e){this.dispatchVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{getAlarmInf:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;switch(a.category){case"10":a.category="水表漏损";break;case"20":a.category="建筑漏损";break;case"30":a.category="DMA漏损";break;case"40":a.category="校区漏损"}t.tableData=a,t.show=!0})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeSurveyDispatch",{dispatchFlag:!1}),t()}).catch(function(t){})},clearForm:function(){this.ruleForm={dispatchDepartment:"",dispatcher:this.ruleForm.dispatcher,implementer:"",dispatchTime:""}},cancelClick:function(){this.$emit("changeSurveyDispatch",{dispatchFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ruleForm.id=e.id;var a=e.qs.stringify(e.ruleForm);e.$api.alarm.addDispatch(a).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeSurveyDispatch",{dispatchFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限或是时间格式不对！"})})})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.dispatchTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.dispatchVisible,"modal-append-to-body":!1,width:"580px","before-close":t.handleClose},on:{"update:visible":function(e){t.dispatchVisible=e}}},[a("div",{staticClass:"dispatch-table"},[a("div",{staticClass:"top-header"},[t._v("漏损勘察派单")]),t._v(" "),a("div",{staticClass:"top-body"},[t.show?a("table",{staticClass:"dispatch-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",[t._v("报警编号")]),t._v(" "),a("td",[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",[t._v("报警时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("报警类型")]),t._v(" "),a("td",[t._v(t._s(t.tableData.category))]),t._v(" "),a("td",[t._v("综合漏损指数")]),t._v(" "),a("td",[t._v(t._s(t.tableData.leakageIndex))])]),t._v(" "),a("tr",[a("td",[t._v("隔周日用水量增量")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addTotal))]),t._v(" "),a("td",[t._v("隔周最小流量增量")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addRangeTotal))])]),t._v(" "),a("tr",[a("td",[t._v("隔周日用水量增幅")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addMin))]),t._v(" "),a("td",[t._v("隔周最小流量增幅")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addRangeMin))])])]):t._e()]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("el-form-item",{attrs:{label:"派单单位",prop:"dispatchDepartment"}},[a("el-input",{attrs:{clearable:""},model:{value:t.ruleForm.dispatchDepartment,callback:function(e){t.$set(t.ruleForm,"dispatchDepartment",e)},expression:"ruleForm.dispatchDepartment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"派单人",prop:"dispatcher"}},[a("el-input",{attrs:{disabled:""},model:{value:t.ruleForm.dispatcher,callback:function(e){t.$set(t.ruleForm,"dispatcher",e)},expression:"ruleForm.dispatcher"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"指定执行人",prop:"implementer"}},[a("el-input",{attrs:{clearable:""},model:{value:t.ruleForm.implementer,callback:function(e){t.$set(t.ruleForm,"implementer",e)},expression:"ruleForm.implementer"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"派单时间",prop:"dispatchTime"}},[a("el-input",{attrs:{placeholder:"时间格式(例：2020-05-28 17:54:23)"},model:{value:t.ruleForm.dispatchTime,callback:function(e){t.$set(t.ruleForm,"dispatchTime",e)},expression:"ruleForm.dispatchTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1)],1)],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var p=a("VU/8")(c,d,!1,function(t){a("G5Yn")},"data-v-5d049d63",null).exports,m={name:"survey-sheet",data:function(){return{tableData:{},sheetVisible:!1,imageUrl:"",value:"",id:"",ruleForm:{disposalDepartment:"",telephone:"",leakageCategory:"",disposalOpinion:"",explain:"",disposaler:"",disposalTime:"",remark:"",image:null},rules:{disposalDepartment:[{required:!0,message:"请输入处理单位",trigger:"blur"}],telephone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],leakageCategory:[{required:!0,message:"请选择勘探简况类型",trigger:"blur"}],disposalOpinion:[{required:!0,message:"请选择处理意见",trigger:"blur"}],explain:[{required:!0,message:"请输入勘探简况说明",trigger:"blur"}],disposaler:[{required:!0,message:"请输入出单人姓名",trigger:"blur"}],disposalTime:[{required:!0,message:"请输入处理时间",trigger:"blur"}],image:[{required:!0,message:"请上传照片",trigger:"blur"}]}}},created:function(){this.ruleForm.disposaler=this.userName},props:{sheetFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{sheetFlag:{handler:function(t,e){this.sheetVisible=t}},alarmId:{handler:function(t,e){console.log(t),""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{getAlarmInf:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;switch(a.category){case"10":a.category="水表漏损";break;case"20":a.category="建筑漏损";break;case"30":a.category="DMA漏损";break;case"40":a.category="校区漏损"}t.tableData=a})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.disposalTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeSheetDispatch",{sheetFlag:!1}),t()}).catch(function(t){})},clearForm:function(){this.ruleForm={disposalDepartment:"",telephone:"",leakageCategory:"",disposalOpinion:"",explain:"",disposaler:this.ruleForm.disposaler,disposalTime:"",remark:"",image:null}},cancelClick:function(){this.$emit("changeSheetDispatch",{sheetFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ruleForm.id=e.id;var a=e.ruleForm,r=new FormData;r.append("id",a.id),r.append("disposalDepartment",a.disposalDepartment),r.append("telephone",a.telephone),r.append("leakageCategory",a.leakageCategory),r.append("disposalOpinion",a.disposalOpinion),r.append("explain",a.explain),r.append("disposaler",a.disposaler),r.append("disposalTime",a.disposalTime),r.append("image",a.image),r.append("remark",a.remark),e.$api.alarm.addLeakageDisposal(r).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeSheetDispatch",{sheetFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限！"})})})},handleChange:function(t,e){this.imageUrl=URL.createObjectURL(t.raw),this.ruleForm.image=t.raw},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.sheetVisible,"modal-append-to-body":!1,width:"700px","before-close":t.handleClose},on:{"update:visible":function(e){t.sheetVisible=e}}},[a("div",{staticClass:"sheet-table"},[a("div",{staticClass:"top-header"},[t._v("漏损勘察出单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"sheet-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",[t._v("编号")]),t._v(" "),a("td",[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",[t._v("报警时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("报警类型")]),t._v(" "),a("td",[t._v(t._s(t.tableData.category))]),t._v(" "),a("td",[t._v("综合漏损指数")]),t._v(" "),a("td",[t._v(t._s(t.tableData.leakageIndex))])]),t._v(" "),a("tr",[a("td",[t._v("隔周日用水量增量")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addTotal))]),t._v(" "),a("td",[t._v("隔周最小流量增量")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addMin))])]),t._v(" "),a("tr",[a("td",[t._v("隔周日用水量增幅")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addRangeTotal))]),t._v(" "),a("td",[t._v("隔周最小流量增幅")]),t._v(" "),a("td",[t._v(t._s(t.tableData.addRangeMin))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatchTime))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"处理单位",prop:"disposalDepartment"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.disposalDepartment,callback:function(e){t.$set(t.ruleForm,"disposalDepartment",e)},expression:"ruleForm.disposalDepartment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.telephone,callback:function(e){t.$set(t.ruleForm,"telephone",e)},expression:"ruleForm.telephone"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"勘察类型",prop:"leakageCategory"}},[a("el-select",{staticClass:"short",model:{value:t.ruleForm.leakageCategory,callback:function(e){t.$set(t.ruleForm,"leakageCategory",e)},expression:"ruleForm.leakageCategory"}},[a("el-option",{attrs:{label:"需勘察漏损",value:"需勘察漏损"}}),t._v(" "),a("el-option",{attrs:{label:"无需勘察",value:"无需勘察"}}),t._v(" "),a("el-option",{attrs:{label:"突发性增量用水或可处理长流水",value:"突发性增量用水或可处理长流水"}}),t._v(" "),a("el-option",{attrs:{label:"其他",value:"其他"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"处理结果",prop:"disposalOpinion"}},[a("el-select",{staticClass:"short",model:{value:t.ruleForm.disposalOpinion,callback:function(e){t.$set(t.ruleForm,"disposalOpinion",e)},expression:"ruleForm.disposalOpinion"}},[a("el-option",{attrs:{label:"无需转派",value:"0"}}),t._v(" "),a("el-option",{attrs:{label:"需转派",value:"1"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"bottom-second"},[a("el-form-item",{attrs:{label:"勘察简况",prop:"explain"}},[a("el-input",{staticClass:"long",attrs:{rows:5,type:"textarea"},model:{value:t.ruleForm.explain,callback:function(e){t.$set(t.ruleForm,"explain",e)},expression:"ruleForm.explain"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"简况照片",prop:"image"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-change":t.handleChange,"before-upload":t.beforeAvatarUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"出单人",prop:"disposaler"}},[a("el-input",{staticClass:"short",attrs:{disabled:"",clearable:""},model:{value:t.ruleForm.disposaler,callback:function(e){t.$set(t.ruleForm,"disposaler",e)},expression:"ruleForm.disposaler"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"回单时间",prop:"disposalTime"}},[a("el-input",{staticClass:"short",model:{value:t.ruleForm.disposalTime,callback:function(e){t.$set(t.ruleForm,"disposalTime",e)},expression:"ruleForm.disposalTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"remark",attrs:{clearable:""},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var v=a("VU/8")(m,u,!1,function(t){a("gy40")},"data-v-35257435",null).exports,_={name:"survey-receipt",data:function(){return{receiptVisible:!1,value:"",id:"",tableData:{},ruleForm:{checkOpinion:"",checker:"",checkTime:"",remark:""},rules:{checkOpinion:[{required:!0,message:"请选择验收意见",trigger:"blur"}],checker:[{required:!0,message:"请输入验收人姓名",trigger:"blur"}],checkTime:[{required:!0,message:"请输入验收时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]}}},created:function(){this.ruleForm.checker=this.userName},props:{receiptFlag:{type:Boolean,default:!1},alarmId:{tyep:String},userName:{type:String}},watch:{receiptFlag:{handler:function(t,e){this.receiptVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{getAlarmInf:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;switch(a.category){case"10":a.category="水表漏损";break;case"20":a.category="建筑漏损";break;case"30":a.category="DMA漏损";break;case"40":a.category="校区漏损"}a.image="data:image/jpg;base64,"+a.image,t.tableData=a})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeSurveyReceipt",{receiptFlag:!1}),t()}).catch(function(t){})},clearForm:function(){this.ruleForm={checkOpinion:"",checker:this.ruleForm.checker,checkTime:"",remark:""}},cancelClick:function(){this.$emit("changeSurveyReceipt",{receiptFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ruleForm.id=e.id;var a=e.qs.stringify(e.ruleForm);e.$api.alarm.updateAlarmDispatch(a).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeSurveyReceipt",{receiptFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限！"})})})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.checkTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.receiptVisible,"modal-append-to-body":!1,width:"660px","before-close":t.handleClose},on:{"update:visible":function(e){t.receiptVisible=e}}},[a("div",{staticClass:"receipt-table"},[a("div",{staticClass:"top-header"},[t._v("漏损勘察回单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"receipt-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("编号")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("报警时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警类型")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.category))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("综合漏损指数")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.leakageIndex))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("隔周日用水量增量")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addTotal))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("隔周最小流量增量")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addMin))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("隔周日用水量增幅")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addRangeTotal))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("隔周最小流量增幅")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.addRangeMin))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchTime))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("处理单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalDepartment))]),t._v(" "),a("td",[t._v("联系电话")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.telephone))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("勘察简况类型")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.leakageCategory))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("勘察简况说明")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.explain))])]),t._v(" "),a("tr",{staticClass:"pic"},[a("td",{attrs:{colspan:"2"}},[t._v("勘察简况照片")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.image}})])]),t._v(" "),a("tr",[a("td",[t._v("处理结果")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalOpinion?"需转派":"无需转派"))]),t._v(" "),a("td",[t._v("出单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposaler))]),t._v(" "),a("td",[t._v("回单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalTime))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",[a("el-form-item",{attrs:{label:"验收意见",prop:"checkOpinion"}},[a("el-select",{attrs:{size:"mini",clearable:""},model:{value:t.ruleForm.checkOpinion,callback:function(e){t.$set(t.ruleForm,"checkOpinion",e)},expression:"ruleForm.checkOpinion"}},[a("el-option",{attrs:{label:"同意",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"不同意",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"验收人",prop:"checker"}},[a("el-input",{attrs:{size:"mini",disabled:""},model:{value:t.ruleForm.checker,callback:function(e){t.$set(t.ruleForm,"checker",e)},expression:"ruleForm.checker"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"验收时间",prop:"checkTime"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.ruleForm.checkTime,callback:function(e){t.$set(t.ruleForm,"checkTime",e)},expression:"ruleForm.checkTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容",clearable:""},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var g=a("VU/8")(_,h,!1,function(t){a("D/wN")},"data-v-7ae8cb76",null).exports,f={name:"repair-transfer",data:function(){return{repairTransferVisible:!1,value:"",id:"",tableData:{},ruleForm:{dispatchDepartment:"",dispatcher:"",dispatchTime:"",implementer:""},rules:{dispatchDepartment:[{required:!0,message:"请输入派单单位",trigger:"blur"}],dispatcher:[{required:!0,message:"请输入派单人",trigger:"blur"}],implementer:[{required:!0,message:"请输入指定执行人",trigger:"blur"}],dispatchTime:[{required:!0,message:"请输入派单时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]}}},created:function(){this.ruleForm.dispatcher=this.userName},props:{repairTransferFlag:{tyep:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{repairTransferFlag:{handler:function(t,e){this.repairTransferVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{clearForm:function(){this.ruleForm={dispatchDepartment:"",dispatcher:this.ruleForm.dispatcher,dispatchTime:"",implementer:""}},getAlarmInf:function(){var t=this;this.$api.alarm.transferDispatch({alarmCode:this.id}).then(function(e){t.ruleForm.id=e.data.id,t.tableData=e.data})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeRepairTransfer",{repairTransferFlag:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changeRepairTransfer",{repairTransferFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=e.qs.stringify(e.ruleForm);e.$api.alarm.addAlarmTransferDispatch(a).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeRepairTransfer",{repairTransferFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限或是时间格式不对！"})})})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.dispatchTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i}}},b={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.repairTransferVisible,"modal-append-to-body":!1,width:"580px","before-close":t.handleClose},on:{"update:visible":function(e){t.repairTransferVisible=e}}},[a("div",{staticClass:"repair-transfer"},[a("div",{staticClass:"top-header"},[t._v("漏损维修转派单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"transfer-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",[t._v("编号")]),t._v(" "),a("td",[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",[t._v("转派时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.transferTime))])]),t._v(" "),a("tr",[a("td",[t._v("维修地址")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.address))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",[a("el-form-item",{attrs:{label:"派单单位",prop:"dispatchDepartment"}},[a("el-input",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.dispatchDepartment,callback:function(e){t.$set(t.ruleForm,"dispatchDepartment",e)},expression:"ruleForm.dispatchDepartment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"派单人",prop:"dispatcher"}},[a("el-input",{attrs:{size:"mini",placeholder:"",disabled:""},model:{value:t.ruleForm.dispatcher,callback:function(e){t.$set(t.ruleForm,"dispatcher",e)},expression:"ruleForm.dispatcher"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"派单时间",prop:"dispatchTime"}},[a("el-input",{attrs:{size:"mini",clearable:""},model:{value:t.ruleForm.dispatchTime,callback:function(e){t.$set(t.ruleForm,"dispatchTime",e)},expression:"ruleForm.dispatchTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"指定执行人",prop:"implementer"}},[a("el-input",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.implementer,callback:function(e){t.$set(t.ruleForm,"implementer",e)},expression:"ruleForm.implementer"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var F=a("VU/8")(f,b,!1,function(t){a("hyeV")},"data-v-45f11a2f",null).exports,D={name:"repair-order",data:function(){return{repairOrderVisible:!1,oldImageUrl:"",newImageUrl:"",tableData:{},value:"",id:"",ruleForm:{disposalDepartment:"",telephone:"",explain:"",oldImage:"",newImage:"",material:"",caliber:"",position:"",structure:"",setDepth:"",estimate:"",leakExplain:"",disposalOpinion:"",disposaler:"",disposalTime:"",remark:""},rules:{disposalDepartment:[{required:!0,message:"请输入处理单位",trigger:"blur"}],telephone:[{required:!0,message:"请输入处理单位联系电话",trigger:"blur"}],explain:[{required:!0,message:"请输入维修简况说明",trigger:"blur"}],oldImage:[{required:!0,message:"请上传维修前照片",trigger:"blur"}],newImage:[{required:!0,message:"请上传维修后照片",trigger:"blur"}],material:[{required:!0,message:"请输入管道材质",trigger:"blur"}],caliber:[{required:!0,message:"请输入管径",trigger:"blur"}],position:[{required:!0,message:"请输入漏水部位",trigger:"blur"}],structure:[{required:!0,message:"请输入路面结构",trigger:"blur"}],setDepth:[{required:!0,message:"请输入管顶埋深",trigger:"blur"}],estimate:[{required:!0,message:"请输入漏水估量",trigger:"blur"}],leakExplain:[{required:!0,message:"请输入漏损简析说明",trigger:"blur"}],disposalOpinion:[{required:!0,message:"请选择处理意见",trigger:"blur"}],disposaler:[{required:!0,message:"请输入出单人姓名",trigger:"blur"}],disposalTime:[{required:!0,message:"请输入回单时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]}}},created:function(){this.ruleForm.disposaler=this.userName},props:{repairOrderFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{repairOrderFlag:{handler:function(t,e){this.repairOrderVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{clearForm:function(){this.ruleForm={disposalDepartment:"",telephone:"",explain:"",oldImage:"",newImage:"",material:"",caliber:"",position:"",structure:"",setDepth:"",estimate:"",leakExplain:"",disposalOpinion:"",disposaler:this.ruleForm.disposaler,disposalTime:"",remark:""}},getAlarmInf:function(){var t=this;this.$api.alarm.transferDispatch({alarmCode:this.id}).then(function(e){t.ruleForm.id=e.data.id,t.tableData=e.data})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.disposalTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeRepairOrder",{repairOrderFlag:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changeRepairOrder",{repairOrderFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=e.ruleForm,r=new FormData;r.append("id",a.id),r.append("disposalDepartment",a.disposalDepartment),r.append("telephone",a.telephone),r.append("explain",a.explain),r.append("oldImage",a.oldImage),r.append("newImage",a.newImage),r.append("material",a.material),r.append("caliber",a.caliber),r.append("position",a.position),r.append("structure",a.structure),r.append("setDepth",a.setDepth),r.append("estimate",a.estimate),r.append("leakExplain",a.leakExplain),r.append("disposalOpinion",a.disposalOpinion),r.append("disposaler",a.disposaler),r.append("disposalTime",a.disposalTime),r.append("remark",a.remark),e.$api.alarm.addAlarmTransferDisposal(r).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeRepairOrder",{repairOrderFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限！"})})})},oldHandleChange:function(t,e){this.oldImageUrl=URL.createObjectURL(t.raw),this.ruleForm.oldImage=t.raw},newHandleChange:function(t,e){this.newImageUrl=URL.createObjectURL(t.raw),this.ruleForm.newImage=t.raw},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.repairOrderVisible,"modal-append-to-body":!1,width:"700px","before-close":t.handleClose},on:{"update:visible":function(e){t.repairOrderVisible=e}}},[a("div",{staticClass:"repair-order"},[a("div",{staticClass:"top-header"},[t._v("漏损勘察出单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"order-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",[t._v("编号")]),t._v(" "),a("td",[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",[t._v("转派时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.transferTime))])]),t._v(" "),a("tr",[a("td",[t._v("维修地址")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatchTime))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"处理单位",prop:"disposalDepartment"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.disposalDepartment,callback:function(e){t.$set(t.ruleForm,"disposalDepartment",e)},expression:"ruleForm.disposalDepartment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.telephone,callback:function(e){t.$set(t.ruleForm,"telephone",e)},expression:"ruleForm.telephone"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-third"},[a("el-form-item",{staticStyle:{width:"100%"},attrs:{label:"故障简况",prop:"explain"}},[a("el-input",{staticClass:"long",attrs:{rows:5,type:"textarea"},model:{value:t.ruleForm.explain,callback:function(e){t.$set(t.ruleForm,"explain",e)},expression:"ruleForm.explain"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-fourth"},[a("el-form-item",{attrs:{label:"维修前照片",prop:"oldImage"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-change":t.oldHandleChange,"before-upload":t.beforeAvatarUpload}},[t.oldImageUrl?a("img",{staticClass:"avatar",attrs:{src:t.oldImageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"维修后照片",prop:"newImage"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-change":t.newHandleChange,"before-upload":t.beforeAvatarUpload}},[t.newImageUrl?a("img",{staticClass:"avatar",attrs:{src:t.newImageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"管道材质",prop:"material"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.material,callback:function(e){t.$set(t.ruleForm,"material",e)},expression:"ruleForm.material"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"管径(mm)",prop:"caliber"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.caliber,callback:function(e){t.$set(t.ruleForm,"caliber",e)},expression:"ruleForm.caliber"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"路面结构",prop:"structure"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.structure,callback:function(e){t.$set(t.ruleForm,"structure",e)},expression:"ruleForm.structure"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"管顶埋深(m)",prop:"setDepth"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.setDepth,callback:function(e){t.$set(t.ruleForm,"setDepth",e)},expression:"ruleForm.setDepth"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"漏水部位",prop:"position"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.position,callback:function(e){t.$set(t.ruleForm,"position",e)},expression:"ruleForm.position"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"漏水估量(吨/天)",prop:"estimate"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.estimate,callback:function(e){t.$set(t.ruleForm,"estimate",e)},expression:"ruleForm.estimate"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"漏损简析",prop:"leakExplain"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.leakExplain,callback:function(e){t.$set(t.ruleForm,"leakExplain",e)},expression:"ruleForm.leakExplain"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"处理结果",prop:"disposalOpinion"}},[a("el-select",{staticClass:"short",model:{value:t.ruleForm.disposalOpinion,callback:function(e){t.$set(t.ruleForm,"disposalOpinion",e)},expression:"ruleForm.disposalOpinion"}},[a("el-option",{attrs:{label:"已修复",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"未修复",value:"0"}})],1)],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"出单人",prop:"disposaler"}},[a("el-input",{staticClass:"short",attrs:{disabled:""},model:{value:t.ruleForm.disposaler,callback:function(e){t.$set(t.ruleForm,"disposaler",e)},expression:"ruleForm.disposaler"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"回单时间",prop:"disposalTime"}},[a("el-input",{staticClass:"short",model:{value:t.ruleForm.disposalTime,callback:function(e){t.$set(t.ruleForm,"disposalTime",e)},expression:"ruleForm.disposalTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{staticClass:"remark",attrs:{clearable:""},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var y=a("VU/8")(D,k,!1,function(t){a("TASZ")},"data-v-4999cea2",null).exports,C={name:"repair-receipt",data:function(){return{repairReceiptVisible:!1,value:"",id:"",tableData:{},ruleForm:{checkOpinion:"",checker:"",checkTime:"",remark:""},rules:{checkOpinion:[{required:!0,message:"请选择验收意见",trigger:"blur"}],checker:[{required:!0,message:"请输入验收人姓名",trigger:"blur"}],checkTime:[{required:!0,message:"请输入验收时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]}}},created:function(){this.ruleForm.checker=this.userName},props:{repairReceiptFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{repairReceiptFlag:{handler:function(t,e){this.repairReceiptVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{clearForm:function(){this.ruleForm={checkOpinion:"",checker:this.ruleForm.checker,checkTime:"",remark:""}},getAlarmInf:function(){var t=this;this.$api.alarm.transferDispatch({alarmCode:this.id}).then(function(e){var a=e.data;a.oldImage="data:image/jpg;base64,"+a.oldImage,a.newImage="data:image/jpg;base64,"+a.newImage,t.ruleForm.id=e.data.id,t.tableData=a})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeRepairReceipt",{repairReceiptFlag:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changeRepairReceipt",{repairReceiptFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var a=e.qs.stringify(e.ruleForm);e.$api.alarm.updateAlarmTransferDispatch(a).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeRepairReceipt",{repairReceiptFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限或是时间格式不对！"})})})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.checkTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i}}},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"5vh",visible:t.repairReceiptVisible,"modal-append-to-body":!1,width:"660px","before-close":t.handleClose},on:{"update:visible":function(e){t.repairReceiptVisible=e}}},[a("div",{staticClass:"receipt-table"},[a("div",{staticClass:"top-header"},[t._v("漏损维修回单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"receipt-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("编号")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.alarmCode))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("转派时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.transferTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("维修地址")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchTime))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("处理单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalDepartment))]),t._v(" "),a("td",[t._v("联系电话")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.telephone))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("维修简况说明")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.explain))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}},[t._v("维修前照片")]),t._v(" "),a("td",{attrs:{colspan:"4"}},[t._v("维修后照片")])]),t._v(" "),a("tr",{staticClass:"pic"},[a("td",{attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.oldImage}})]),t._v(" "),a("td",{attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.newImage}})])]),t._v(" "),a("tr",[a("td",[t._v("管道材质")]),t._v(" "),a("td",[t._v(t._s(t.tableData.material))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("管径(mm)")]),t._v(" "),a("td",[t._v(t._s(t.tableData.caliber))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("漏水部位")]),t._v(" "),a("td",[t._v(t._s(t.tableData.position))])]),t._v(" "),a("tr",[a("td",[t._v("路面结构")]),t._v(" "),a("td",[t._v(t._s(t.tableData.structure))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("管顶埋深(m)")]),t._v(" "),a("td",[t._v(t._s(t.tableData.setDepth))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("漏水估量(吨/天)")]),t._v(" "),a("td",[t._v(t._s(t.tableData.estimate))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("漏损简析")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.leakExplain))])]),t._v(" "),a("tr",[a("td",[t._v("处理结果")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposalOpinion?"已修复":"未修复"))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("出单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposaler))]),t._v(" "),a("td",[t._v("回单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.remark))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",[a("el-form-item",{attrs:{label:"验收意见",prop:"checkOpinion"}},[a("el-select",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.checkOpinion,callback:function(e){t.$set(t.ruleForm,"checkOpinion",e)},expression:"ruleForm.checkOpinion"}},[a("el-option",{attrs:{label:"同意",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"不同意",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"验收人",prop:"checker"}},[a("el-input",{attrs:{size:"mini",placeholder:"",disabled:""},model:{value:t.ruleForm.checker,callback:function(e){t.$set(t.ruleForm,"checker",e)},expression:"ruleForm.checker"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"验收时间",prop:"checkTime"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.ruleForm.checkTime,callback:function(e){t.$set(t.ruleForm,"checkTime",e)},expression:"ruleForm.checkTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{size:"mini",placeholder:"请输入内容",clearable:""},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var x=a("VU/8")(C,w,!1,function(t){a("XQ1L")},"data-v-2900ca79",null).exports,T={name:"fault-dispatch",data:function(){return{faultDispatchVisible:!1,value:"",id:"",tableData:{},ruleForm:{dispatchDepartment:"",dispatcher:"",dispatchTime:"",implementer:""},rules:{dispatchDepartment:[{required:!0,message:"请输入派单单位",trigger:"blur"}],dispatcher:[{required:!0,message:"请输入派单人",trigger:"blur"}],implementer:[{required:!0,message:"请输入指定执行人",trigger:"blur"}],dispatchTime:[{required:!0,message:"请输入派单时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]}}},created:function(){this.ruleForm.dispatcher=this.userName},props:{faultDispatchFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{faultDispatchFlag:{handler:function(t,e){this.faultDispatchVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{clearForm:function(){this.ruleForm={dispatchDepartment:"",dispatcher:this.ruleForm.dispatcher,dispatchTime:"",implementer:""}},getAlarmInf:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;a.category="设备故障",t.tableData=a})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeFaultDispatch",{faultDispatchFlag:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changeFaultDispatch",{faultDispatchFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ruleForm.id=e.id;var a=e.qs.stringify(e.ruleForm);e.$api.alarm.addDispatch(a).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeFaultDispatch",{faultDispatchFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限或是时间格式不对！"})})})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.dispatchTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i}}},$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.faultDispatchVisible,"modal-append-to-body":!1,width:"580px","before-close":t.handleClose},on:{"update:visible":function(e){t.faultDispatchVisible=e}}},[a("div",{staticClass:"fault-dispatch"},[a("div",{staticClass:"top-header"},[t._v("故障处理派单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"fault-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",[t._v("编号")]),t._v(" "),a("td",[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",[t._v("报警时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("报警类型")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.category))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",[a("el-form-item",{attrs:{label:"派单单位",prop:"dispatchDepartment"}},[a("el-input",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.dispatchDepartment,callback:function(e){t.$set(t.ruleForm,"dispatchDepartment",e)},expression:"ruleForm.dispatchDepartment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"派单人",prop:"dispatcher"}},[a("el-input",{attrs:{size:"mini",placeholder:"",disabled:""},model:{value:t.ruleForm.dispatcher,callback:function(e){t.$set(t.ruleForm,"dispatcher",e)},expression:"ruleForm.dispatcher"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"派单时间",prop:"dispatchTime"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.ruleForm.dispatchTime,callback:function(e){t.$set(t.ruleForm,"dispatchTime",e)},expression:"ruleForm.dispatchTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"指定执行人",prop:"implementer"}},[a("el-input",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.implementer,callback:function(e){t.$set(t.ruleForm,"implementer",e)},expression:"ruleForm.implementer"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var I=a("VU/8")(T,$,!1,function(t){a("cHs5")},"data-v-67957924",null).exports,S={name:"fault-order",data:function(){return{faultOrderVisible:!1,oldImageUrl:"",newImageUrl:"",value:"",id:"",tableData:{},ruleForm:{disposalDepartment:"",telephone:"",explain:"",oldImage:"",newImage:"",disposalOpinion:"",disposaler:"",disposalTime:"",remark:""},rules:{disposalDepartment:[{required:!0,message:"请输入处理单位",trigger:"blur"}],telephone:[{required:!0,message:"请输入处理单位联系电话",trigger:"blur"}],explain:[{required:!0,message:"请输入维修简况说明",trigger:"blur"}],oldImage:[{required:!0,message:"请上传维修前照片",trigger:"blur"}],newImage:[{required:!0,message:"请上传维修后照片",trigger:"blur"}],disposalOpinion:[{required:!0,message:"请选择处理意见",trigger:"blur"}],disposaler:[{required:!0,message:"请输入出单人姓名",trigger:"blur"}],disposalTime:[{required:!0,message:"请输入处理时间",trigger:"blur"}]}}},created:function(){this.ruleForm.disposaler=this.userName},props:{faultOrderFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{faultOrderFlag:{handler:function(t,e){this.faultOrderVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{clearForm:function(){this.ruleForm={disposalDepartment:"",telephone:"",explain:"",oldImage:"",newImage:"",disposalOpinion:"",disposaler:this.ruleForm.disposaler,disposalTime:"",remark:""}},getAlarmInf:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;a.category="设备故障",t.tableData=a})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.disposalTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeFaultOrder",{faultOrderFlag:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changeFaultOrder",{faultOrderFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ruleForm.id=e.id;var a=e.ruleForm,r=new FormData;r.append("id",a.id),r.append("disposalDepartment",a.disposalDepartment),r.append("telephone",a.telephone),r.append("explain",a.explain),r.append("oldImage",a.oldImage),r.append("newImage",a.newImage),r.append("disposalOpinion",a.disposalOpinion),r.append("disposaler",a.disposaler),r.append("disposalTime",a.disposalTime),r.append("remark",a.remark),e.$api.alarm.addDeviceDisposal(r).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeFaultOrder",{faultOrderFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限！"})})})},oldHandleChange:function(t,e){this.oldImageUrl=URL.createObjectURL(t.raw),this.ruleForm.oldImage=t.raw},newHandleChange:function(t,e){this.newImageUrl=URL.createObjectURL(t.raw),this.ruleForm.newImage=t.raw},beforeAvatarUpload:function(t){var e="image/jpeg"===t.type,a=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG 格式!"),a||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&a}}},O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.faultOrderVisible,"modal-append-to-body":!1,width:"700px","before-close":t.handleClose},on:{"update:visible":function(e){t.faultOrderVisible=e}}},[a("div",{staticClass:"fault-order"},[a("div",{staticClass:"top-header"},[t._v("故障处理出单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"fault-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",[t._v("编号")]),t._v(" "),a("td",[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",[t._v("报警时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",[t._v("维修地址")]),t._v(" "),a("td",{attrs:{colspan:"3"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatchTime))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"处理单位",prop:"disposalDepartment"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.disposalDepartment,callback:function(e){t.$set(t.ruleForm,"disposalDepartment",e)},expression:"ruleForm.disposalDepartment"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"联系电话",prop:"telephone"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.telephone,callback:function(e){t.$set(t.ruleForm,"telephone",e)},expression:"ruleForm.telephone"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-third"},[a("el-form-item",{attrs:{label:"故障简况说明",prop:"explain"}},[a("el-input",{staticClass:"long",attrs:{rows:3,type:"textarea"},model:{value:t.ruleForm.explain,callback:function(e){t.$set(t.ruleForm,"explain",e)},expression:"ruleForm.explain"}})],1)],1),t._v(" "),a("div",{staticClass:"bottom-fourth"},[a("el-form-item",{attrs:{label:"维修前照片",prop:"oldImage"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-change":t.oldHandleChange,"before-upload":t.beforeAvatarUpload}},[t.oldImageUrl?a("img",{staticClass:"avatar",attrs:{src:t.oldImageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"维修后照片",prop:"newImage"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"","show-file-list":!1,"on-change":t.newHandleChange,"before-upload":t.beforeAvatarUpload}},[t.newImageUrl?a("img",{staticClass:"avatar",attrs:{src:t.newImageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"出单人",prop:"disposaler"}},[a("el-input",{staticClass:"short",attrs:{disabled:""},model:{value:t.ruleForm.disposaler,callback:function(e){t.$set(t.ruleForm,"disposaler",e)},expression:"ruleForm.disposaler"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"回单时间",prop:"disposalTime"}},[a("el-input",{staticClass:"short",model:{value:t.ruleForm.disposalTime,callback:function(e){t.$set(t.ruleForm,"disposalTime",e)},expression:"ruleForm.disposalTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1)],1),t._v(" "),a("div",{staticClass:"bottom-first"},[a("el-form-item",{attrs:{label:"处理结果",prop:"disposalOpinion"}},[a("el-select",{staticClass:"short",model:{value:t.ruleForm.disposalOpinion,callback:function(e){t.$set(t.ruleForm,"disposalOpinion",e)},expression:"ruleForm.disposalOpinion"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"异常",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"dispatchDepartment"}},[a("el-input",{staticClass:"short",attrs:{clearable:""},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var R=a("VU/8")(S,O,!1,function(t){a("53Dk")},"data-v-307f8ac2",null).exports,A={name:"fault-receipt",data:function(){return{faultReceiptVisible:!1,value:"",id:"",tableData:{},ruleForm:{checkOpinion:"",checker:"",checkTime:"",remark:""},rules:{checkOpinion:[{required:!0,message:"请选择验收意见",trigger:"blur"}],checker:[{required:!0,message:"请输入验收人姓名",trigger:"blur"}],checkTime:[{required:!0,message:"请输入验收时间",trigger:"blur"},{pattern:"^(?:19|20)[0-9][0-9]-(?:(?:0[1-9])|(?:1[0-2]))-(?:(?:[0-2][1-9])|(?:[1-3][0-1])) (?:(?:[0-2][0-3])|(?:[0-1][0-9])):[0-5][0-9]:[0-5][0-9]$",message:"请按正确的时间格式填写",trigger:["blur"]}]}}},created:function(){this.ruleForm.checker=this.userName},props:{faultReceiptFlag:{type:Boolean,default:!1},alarmId:{type:String},userName:{type:String}},watch:{faultReceiptFlag:{handler:function(t,e){this.faultReceiptVisible=t}},alarmId:{handler:function(t,e){""!=t&&null!=t&&(this.clearForm(),this.id=t,this.getAlarmInf())}}},methods:{clearForm:function(){this.ruleForm={checkOpinion:"",checker:this.ruleForm.checker,checkTime:"",remark:""}},getAlarmInf:function(){var t=this;this.$api.alarm.findDispath({id:this.id}).then(function(e){var a=e.data;a.oldImage="data:image/jpg;base64,"+a.oldImage,a.newImage="data:image/jpg;base64,"+a.newImage,a.category="设备故障",t.tableData=a})},handleClose:function(t){var e=this;this.$confirm("确认关闭？").then(function(a){e.$emit("changeFaultReceipt",{faultReceiptFlag:!1}),t()}).catch(function(t){})},cancelClick:function(){this.$emit("changeFaultReceipt",{faultReceiptFlag:!1})},defineClick:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.ruleForm.id=e.id;var a=e.qs.stringify(e.ruleForm);e.$api.alarm.updateAlarmDispatch(a).then(function(t){200==t.status?(e.$message({type:"success",message:"处理成功！"}),e.$emit("changeFaultReceipt",{faultReceiptFlag:!1,type:1})):e.$message({type:"error",message:"你还没有开通此操作权限或是时间格式不对！"})})})},link:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a=a<10?"0"+a:a;var r=t.getDate();r=r<10?"0"+r:r;var s=t.getHours();s=s<10?"0"+s:s;var l=t.getMinutes();l=l<10?"0"+l:l;var i=t.getSeconds();i=i<10?"0"+i:i,this.ruleForm.checkTime=e+"-"+a+"-"+r+" "+s+":"+l+":"+i}}},V={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{staticClass:"survey-dialog",attrs:{top:"15vh",visible:t.faultReceiptVisible,"modal-append-to-body":!1,width:"660px","before-close":t.handleClose},on:{"update:visible":function(e){t.faultReceiptVisible=e}}},[a("div",{staticClass:"fault-receipt"},[a("div",{staticClass:"top-header"},[t._v("漏损维修回单")]),t._v(" "),a("div",{staticClass:"top-body"},[a("table",{staticClass:"fault-top",attrs:{border:"1",width:"100%"}},[a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("编号")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.id))]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v("报警时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.alarmTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警地址")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.address))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("报警类型")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.category))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("故障简述")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.reportContent))])]),t._v(" "),a("tr",[a("td",[t._v("派单单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchDepartment))]),t._v(" "),a("td",[t._v("派单人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.dispatcher))]),t._v(" "),a("td",[t._v("派单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.dispatchTime))])]),t._v(" "),a("tr",[a("td",[t._v("指定执行人")]),t._v(" "),a("td",[t._v(t._s(t.tableData.implementer))]),t._v(" "),a("td",[t._v("处理单位")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalDepartment))]),t._v(" "),a("td",[t._v("联系电话")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.telephone))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("维修简况说明")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.explain))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"4"}},[t._v("维修前照片")]),t._v(" "),a("td",{attrs:{colspan:"4"}},[t._v("维修后照片")])]),t._v(" "),a("tr",{staticClass:"pic"},[a("td",{attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.oldImage}})]),t._v(" "),a("td",{attrs:{colspan:"4"}},[a("img",{staticClass:"image_type",attrs:{src:t.tableData.newImage}})])]),t._v(" "),a("tr",[a("td",[t._v("处理结果")]),t._v(" "),a("td",[t._v(t._s(t.tableData.disposalOpinion?"正常":"异常"))]),t._v(" "),a("td",[t._v("出单人")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposaler))]),t._v(" "),a("td",[t._v("回单时间")]),t._v(" "),a("td",{attrs:{colspan:"2"}},[t._v(t._s(t.tableData.disposalTime))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("处理状态")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.status))])]),t._v(" "),a("tr",[a("td",{attrs:{colspan:"2"}},[t._v("备注")]),t._v(" "),a("td",{attrs:{colspan:"6"}},[t._v(t._s(t.tableData.remark))])])])]),t._v(" "),a("div",{staticClass:"bottom-header"},[t._v("填写信息")]),t._v(" "),a("div",{staticClass:"bottom-body"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px",size:"medium"}},[a("div",[a("el-form-item",{attrs:{label:"验收意见",prop:"checkOpinion "}},[a("el-select",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.checkOpinion,callback:function(e){t.$set(t.ruleForm,"checkOpinion",e)},expression:"ruleForm.checkOpinion"}},[a("el-option",{attrs:{label:"同意",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"不同意",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"验收人",prop:"checker"}},[a("el-input",{attrs:{size:"mini",placeholder:"",disabled:""},model:{value:t.ruleForm.checker,callback:function(e){t.$set(t.ruleForm,"checker",e)},expression:"ruleForm.checker"}})],1)],1),t._v(" "),a("div",[a("el-form-item",{attrs:{label:"验收时间",prop:"checkTime"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.ruleForm.checkTime,callback:function(e){t.$set(t.ruleForm,"checkTime",e)},expression:"ruleForm.checkTime"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"suffix",title:"点击获取当前时间"},on:{click:t.link},slot:"suffix"})])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{size:"mini",placeholder:"",clearable:""},model:{value:t.ruleForm.remark,callback:function(e){t.$set(t.ruleForm,"remark",e)},expression:"ruleForm.remark"}})],1)],1)])],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.cancelClick}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.defineClick("ruleForm")}}},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var U=a("VU/8")(A,V,!1,function(t){a("EUHi")},"data-v-38574836",null).exports,q=a("mF0L"),M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-radio-group",{attrs:{size:"mini",fill:"#67C23A"},on:{change:t.change},model:{value:t.radio,callback:function(e){t.radio=e},expression:"radio"}},[a("el-radio-button",{attrs:{label:"2"}},[t._v("待处理")]),t._v(" "),a("el-radio-button",{attrs:{label:"0"}},[t._v("处理中")]),t._v(" "),a("el-radio-button",{attrs:{label:"1"}},[t._v("处理完成")]),t._v(" "),a("el-radio-button",{attrs:{label:"3"}},[t._v("无需处理")])],1)},staticRenderFns:[]};var z={components:{SelectStatus:a("VU/8")({name:"select-status",data:function(){return{radio:"2"}},methods:{change:function(){this.$emit("changeStatus",{status:this.radio})}}},M,!1,function(t){a("ZlY5")},"data-v-b48bf874",null).exports,FaultReceipt:U,FaultOrder:R,FaultDispatch:I,RepairReceipt:x,RepairOrder:y,RepairTransfer:F,SurveyReceipt:g,SurveySheet:v,SurveyDispatch:p,PrintDialog:n.a,SelectAlarmType:o,SelectTimes:l},name:"alarm-o-a-management",data:function(){return{columns:[{name:"报警编号",prop:"id"},{name:"报警地址",prop:"address"},{name:"报警时间",prop:"alarmTime"},{name:"报警类型",prop:"reportContent"},{name:"综合漏损指数",prop:"leakageIndex"},{name:"预处理",prop:"disposalStatus"},{name:"派单人",prop:"dispatcher"},{name:"出单人",prop:"disposaler"},{name:"出单验收人",prop:"disposalChecker"},{name:"转派单人",prop:"transferer"},{name:"转派出单人",prop:"transferDisposaler"},{name:"回单人",prop:"checker"}],title:"报警信息",start:"",end:"",type:"",show:!1,flag:!0,isOpen:!1,status:0,dispatchFlag:!1,sheetFlag:!1,receiptFlag:!1,repairTransferFlag:!1,repairOrderFlag:!1,repairReceiptFlag:!1,faultDispatchFlag:!1,faultOrderFlag:!1,faultReceiptFlag:!1,alarmId:"",printId:"",userName:"",name:"status",value:"2",disposalStatus:1}},created:function(){this.userName=localStorage.getItem("userName")},methods:{searchAlarm:function(){var t=this;this.show=!1;var e={pageNum:1,pageSize:1e4,category:this.type,startTime:this.start,endTime:this.end,name:this.name,value:this.value,disposalStatus:this.disposalStatus},a=[];this.$api.alarm.findAll(e).then(function(e){a=e.data.list,t.tableData=t.getTableData(a),t.show=!0})},getTableData:function(t){return t instanceof Array&&t.length>0&&t.forEach(function(t){switch(t.flag=!0,t.disposalStatus){case"1":t.disposalStatus="待处理";break;case"2":t.disposalStatus="√";break;case"3":t.disposalStatus="×",t.flag=!1}t.flag&&"50"!=t.category&&!t.status?(t.dispatcher=t.dispatcher?t.dispatcher:"待处理",t.disposaler=t.disposaler?t.disposaler:"待处理",t.disposalChecker=t.disposalChecker?t.disposalChecker:"待处理",t.transferer=t.transferer?t.transferer:"待处理",t.transferDisposaler=t.transferDisposaler?t.transferDisposaler:"待处理",t.checker=t.checker?t.checker:"待处理"):t.flag&&"50"==t.category&&!t.status?(t.dispatcher=t.dispatcher?t.dispatcher:"待处理",t.disposaler=t.disposaler?t.disposaler:"待处理",t.disposalChecker=t.disposalChecker?t.disposalChecker:"待处理",t.transferer="无",t.transferDisposaler="无",t.checker="无"):t.status?(t.dispatcher=t.dispatcher?t.dispatcher:"无",t.disposaler=t.disposaler?t.disposaler:"无",t.disposalChecker=t.disposalChecker?t.disposalChecker:"无",t.transferer=t.transferer?t.transferer:"无",t.transferDisposaler=t.transferDisposaler?t.transferDisposaler:"无",t.checker=t.checker?t.checker:"无"):(t.dispatcher="无",t.disposaler="无",t.disposalChecker="无",t.transferer="无",t.transferDisposaler="无",t.checker="无")}),t},change:function(t){var e=this;this.$confirm("此操作将修改该条报警信息的预处理状态, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.alarm.updateStatus(e.qs.stringify({id:t.id,disposalStatus:t.disposalStatus})).then(function(t){"200"==t.status?e.$message({type:"success",message:"处理成功！"}):e.$message({type:"error",message:"权限不足！"}),e.searchAlarm()}).catch(function(){e.$message({type:"info",message:"处理失败！"}),e.searchAlarm()})}).catch(function(){e.$message({type:"info",message:"已取消处理"}),e.searchAlarm()})},toWaterSupervision:function(t){},changeTimes:function(t){this.start=t.start,this.end=t.end,this.show=!1,this.searchAlarm()},changeType:function(t){this.type=t.type,this.show=!1,this.searchAlarm()},changeStatus:function(t){"2"===t.status?(this.show=!1,this.name="status",this.value=t.status,this.disposalStatus=1,this.searchAlarm()):"0"===t.status||"1"===t.status?(this.show=!1,this.name="status",this.value=t.status,this.disposalStatus=2,this.searchAlarm()):"3"===t.status&&(this.show=!1,this.name="status",this.value="1",this.disposalStatus=3,this.searchAlarm())},alarmHandle:function(t){switch(this.alarmId=t.id,t.processStatus){case"100":this.dispatchFlag=!0;break;case"110":this.sheetFlag=!0;break;case"120":this.receiptFlag=!0;break;case"200":this.repairTransferFlag=!0;break;case"210":this.repairOrderFlag=!0;break;case"220":this.repairReceiptFlag=!0;break;case"300":this.faultDispatchFlag=!0;break;case"310":this.faultOrderFlag=!0;break;case"320":this.faultReceiptFlag=!0}},alarmPrint:function(t,e){this.isOpen=!0,this.status=t,this.printId=e.id},changePrint:function(t){this.isOpen=t.isOpen},openPrint:function(){this.status=0},changeSurveyDispatch:function(t){this.dispatchFlag=t.dispatchFlag,t.type&&1==t.type&&this.searchAlarm()},changeSheetDispatch:function(t){this.sheetFlag=t.sheetFlag,t.type&&1==t.type&&this.searchAlarm()},changeSurveyReceipt:function(t){this.receiptFlag=t.receiptFlag,t.type&&1==t.type&&this.searchAlarm()},changeRepairTransfer:function(t){this.repairTransferFlag=t.repairTransferFlag,t.type&&1==t.type&&this.searchAlarm()},changeRepairOrder:function(t){this.repairOrderFlag=t.repairOrderFlag,t.type&&1==t.type&&this.searchAlarm()},changeRepairReceipt:function(t){this.repairReceiptFlag=t.repairReceiptFlag,t.type&&1==t.type&&this.searchAlarm()},changeFaultDispatch:function(t){this.faultDispatchFlag=t.faultDispatchFlag,t.type&&1==t.type&&this.searchAlarm()},changeFaultOrder:function(t){this.faultOrderFlag=t.faultOrderFlag,t.type&&1==t.type&&this.searchAlarm()},changeFaultReceipt:function(t){this.faultReceiptFlag=t.faultReceiptFlag,t.type&&1==t.type&&this.searchAlarm()},exportData:function(){Object(q.a)(this.columns,this.tableData,this.title)},link:function(t){var e="";switch(t.category){case"10":e="WaterUseSupervision";break;case"20":e="BuildingWaterSupervision";break;case"30":e="DMAWaterSupervision";break;case"40":e="CampusWaterSupervision";break;case"50":e="WaterUseSupervision"}this.$router.push({name:e,params:{id:Number(t.id.substring(1,4))}})}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex"},[a("div",{staticClass:"content body"},[a("div",{staticClass:"box box-solid"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("报警OA管理")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.show,expression:"!show"}],staticClass:"box-body"},[a("div",{staticClass:"select-row"},[a("select-times",{on:{changeTimes:t.changeTimes}}),t._v(" "),a("select-alarm-type",{on:{changeType:t.changeType}}),t._v(" "),a("select-status",{on:{changeStatus:t.changeStatus}}),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-download"},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"table-row"},[t.show?a("el-table",{attrs:{border:"",data:t.tableData,size:"mini",height:"100%","default-sort":{prop:"alarmTime",order:"descending"}}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.childrenAlarm,function(e){return a("div",[a("el-form",{attrs:{inline:""}},[a("el-form-item",{staticClass:"redItem",attrs:{label:"报警编号："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(e.id))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"报警时间："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(e.alarmTime))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"地址："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(e.address))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"说明："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(e.reportContent))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"综合指数："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.leakageIndex?"---":e.leakageIndex))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"日用水量："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.totalQuantity?"---":e.totalQuantity))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"日量周同比增量："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.addTotal?"---":e.addTotal))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"日量周同比增幅："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.addRangeTotal?"---":e.addRangeTotal))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"日最小流量："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.minQuantity?"---":e.minQuantity))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"最小量周同比增量："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.addMin?"---":e.addMin))])]),t._v(" "),a("el-form-item",{staticClass:"redItem",attrs:{label:"最小量周同比增幅："}},[a("span",{staticStyle:{color:"#A0A0A0"}},[t._v(t._s(null==e.addRangeMin?"---":e.addRangeMin))])])],1),t._v(" "),a("el-divider")],1)})}}],null,!1,1014618223)}),t._v(" "),a("el-table-column",{attrs:{label:"报警编号",prop:"id",align:"center","min-width":"90"}}),t._v(" "),a("el-table-column",{attrs:{label:"报警地址",prop:"address",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return t.link(e.row)}}},[t._v(t._s(e.row.address))])]}}],null,!1,2476403693)}),t._v(" "),a("el-table-column",{attrs:{label:"报警时间",prop:"alarmTime",width:"140",align:"center",sortable:""}}),t._v(" "),a("el-table-column",{attrs:{label:"报警类型",prop:"category",align:"center","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[10==e.row.category?a("span",[t._v("水表报警")]):t._e(),t._v(" "),20==e.row.category?a("span",[t._v("建筑报警")]):t._e(),t._v(" "),30==e.row.category?a("span",[t._v("DMA报警")]):t._e(),t._v(" "),40==e.row.category?a("span",[t._v("区域报警")]):t._e(),t._v(" "),50==e.row.category?a("span",[t._v("设备报警")]):t._e()]}}],null,!1,1862459493)}),t._v(" "),a("el-table-column",{attrs:{label:"综合漏损指数",prop:"leakageIndex",width:"140",align:"center",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-popover",{attrs:{placement:"bottom",width:"220",trigger:"hover"}},[a("div",{staticClass:"index-message"},[a("div",[t._v("报警日水量(吨)："+t._s(e.row.totalQuantity?e.row.totalQuantity:"--"))]),t._v(" "),a("div",[t._v("日量周同比增量(吨)："+t._s(e.row.addTotal?e.row.addTotal:"--"))]),t._v(" "),a("div",[t._v("日量周同比增幅："+t._s(e.row.addRangeTotal?e.row.addRangeTotal:"--"))]),t._v(" "),a("div",[t._v("报警日最小流量(吨)："+t._s(e.row.minQuantity?e.row.minQuantity:"--"))]),t._v(" "),a("div",[t._v("最小量周同比增量(吨)："+t._s(e.row.addMin?e.row.addMin:"--"))]),t._v(" "),a("div",[t._v("最小量周同比增幅："+t._s(e.row.addRangeMin?e.row.addRangeMin:"--"))])]),t._v(" "),a("el-link",{attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v(t._s(e.row.leakageIndex?e.row.leakageIndex:"--"))])],1)]}}],null,!1,2165736534)}),t._v(" "),a("el-table-column",{attrs:{label:"预处理",prop:"disposalStatus",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.disposalStatus?"yellow":"green"},[t._v("\n                  "+t._s(e.row.disposalStatus)+"\n                ")])]}}],null,!1,91012722)}),t._v(" "),a("el-table-column",{attrs:{label:"派单人",prop:"dispatcher",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.dispatcher?"yellow":"green"},[t._v("\n                  "+t._s(e.row.dispatcher)+"\n                ")])]}}],null,!1,248880018)}),t._v(" "),a("el-table-column",{attrs:{label:"出单人",prop:"disposaler",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.disposaler?"yellow":"green"},[t._v("\n                  "+t._s(e.row.disposaler)+"\n                ")])]}}],null,!1,1755168978)}),t._v(" "),a("el-table-column",{attrs:{label:"出单验收人",prop:"disposalChecker",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.disposalChecker?"yellow":"green"},[t._v("\n                  "+t._s(e.row.disposalChecker)+"\n                ")])]}}],null,!1,4096003890)}),t._v(" "),a("el-table-column",{attrs:{label:"转派单人",prop:"transferer",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.transferer?"yellow":"green"},[t._v("\n                  "+t._s(e.row.transferer)+"\n                ")])]}}],null,!1,1140387666)}),t._v(" "),a("el-table-column",{attrs:{label:"转派出单人",prop:"transferDisposaler",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.transferDisposaler?"yellow":"green"},[t._v("\n                  "+t._s(e.row.transferDisposaler)+"\n                ")])]}}],null,!1,1791335570)}),t._v(" "),a("el-table-column",{attrs:{label:"回单人",prop:"checker",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{class:"待处理"==e.row.checker?"yellow":"green"},[t._v("\n                  "+t._s(e.row.checker)+"\n                ")])]}}],null,!1,3351426706)}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-select",{attrs:{size:"mini",placeholder:"预处理",disabled:"待处理"!=e.row.disposalStatus},on:{change:function(a){return t.change(e.row)}},model:{value:e.row.disposalStatus,callback:function(a){t.$set(e.row,"disposalStatus",a)},expression:"scope.row.disposalStatus"}},[a("el-option",{attrs:{label:"需处理",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"无需处理",value:"3"}})],1),t._v(" "),a("el-popover",{attrs:{placement:"bottom",width:"400",trigger:"click"}},[a("div",{staticClass:"alarm-management"},["50"!=e.row.category?a("el-button",{attrs:{disabled:e.row.status,type:"success",size:"mini"},on:{click:function(a){return t.alarmHandle(e.row)}}},[t._v("报警信息处理")]):t._e(),t._v(" "),"50"!=e.row.category?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.alarmPrint(1,e.row)}}},[t._v("漏损勘察单")]):t._e(),t._v(" "),"50"!=e.row.category?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.alarmPrint(2,e.row)}}},[t._v("维修转派单")]):t._e(),t._v(" "),"50"==e.row.category?a("el-button",{attrs:{disabled:e.row.status,type:"success",size:"mini"},on:{click:function(a){return t.alarmHandle(e.row)}}},[t._v("报警信息处理")]):t._e(),t._v(" "),"50"==e.row.category?a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.alarmPrint(3,e.row)}}},[t._v("故障处理单")]):t._e()],1),t._v(" "),a("el-button",{attrs:{slot:"reference",type:"primary",size:"mini",disabled:"×"==e.row.disposalStatus||"待处理"==e.row.disposalStatus},on:{click:t.openPrint},slot:"reference"},[t._v("报警OA管理")])],1)]}}],null,!1,1544937684)})],1):t._e(),t._v(" "),a("print-dialog",{attrs:{alarmId:t.printId,status:t.status,isOpen:t.isOpen},on:{changePrint:t.changePrint}}),t._v(" "),a("survey-dispatch",{attrs:{userName:t.userName,alarmId:t.dispatchFlag?t.alarmId:"",dispatchFlag:t.dispatchFlag},on:{changeSurveyDispatch:t.changeSurveyDispatch}}),t._v(" "),a("survey-sheet",{attrs:{userName:t.userName,alarmId:t.sheetFlag?t.alarmId:"",sheetFlag:t.sheetFlag},on:{changeSheetDispatch:t.changeSheetDispatch}}),t._v(" "),a("survey-receipt",{attrs:{userName:t.userName,alarmId:t.receiptFlag?t.alarmId:"",receiptFlag:t.receiptFlag},on:{changeSurveyReceipt:t.changeSurveyReceipt}}),t._v(" "),a("repair-transfer",{attrs:{userName:t.userName,alarmId:t.repairTransferFlag?t.alarmId:"",repairTransferFlag:t.repairTransferFlag},on:{changeRepairTransfer:t.changeRepairTransfer}}),t._v(" "),a("repair-order",{attrs:{userName:t.userName,alarmId:t.repairOrderFlag?t.alarmId:"",repairOrderFlag:t.repairOrderFlag},on:{changeRepairOrder:t.changeRepairOrder}}),t._v(" "),a("repair-receipt",{attrs:{userName:t.userName,alarmId:t.repairReceiptFlag?t.alarmId:"",repairReceiptFlag:t.repairReceiptFlag},on:{changeRepairReceipt:t.changeRepairReceipt}}),t._v(" "),a("fault-dispatch",{attrs:{userName:t.userName,alarmId:t.faultDispatchFlag?t.alarmId:"",faultDispatchFlag:t.faultDispatchFlag},on:{changeFaultDispatch:t.changeFaultDispatch}}),t._v(" "),a("fault-order",{attrs:{userName:t.userName,alarmId:t.faultOrderFlag?t.alarmId:"",faultOrderFlag:t.faultOrderFlag},on:{changeFaultOrder:t.changeFaultOrder}}),t._v(" "),a("fault-receipt",{attrs:{userName:t.userName,alarmId:t.faultReceiptFlag?t.alarmId:"",faultReceiptFlag:t.faultReceiptFlag},on:{changeFaultReceipt:t.changeFaultReceipt}})],1)])])])])},staticRenderFns:[]};var E=a("VU/8")(z,N,!1,function(t){a("//T2")},"data-v-8e1e538c",null);e.default=E.exports},"uKY/":function(t,e){}});
//# sourceMappingURL=2.d86d7866306c8cf86968.js.map