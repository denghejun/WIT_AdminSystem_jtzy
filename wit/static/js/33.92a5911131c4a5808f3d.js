webpackJsonp([33],{"+w4f":function(e,t){},"/ZiC":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={components:{SelectRegion:a("D1s6").a},name:"region-picture",data:function(){return{titleName:"校区及DMA：",regionValue:[1,1],regionId:1,imageData:[],tableData:[]}},mounted:function(){this.getRegionPic()},methods:{handleChange:function(e){this.fileData=e.raw},uploadFiles:function(){var e=this,t=this,a=new FormData;a.append("picFile",t.fileData),a.append("waterregionid",t.regionId),t.$api.waterRegionPic.addRegionPic(a).then(function(a){200==a.status?(e.$message({type:"success",message:"图片上传成功！"}),t.getRegionPic()):e.$message({type:"error",message:"您的账号权限不足！"})})},getRegionPic:function(){var e=this,t={waterregionid:this.regionId};this.$api.waterRegionPic.findRegionPics(t).then(function(t){null==t||""==t?e.imageData=[]:(t.forEach(function(e){e.image="data:image/jpg;base64,"+e.image}),e.imageData=t)})},change:function(e){this.regionId=e.value,this.getRegionPic()},handleDelete:function(e,t){var a=this;this.$confirm("此操作将永久删除该内容, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(t.id),a.$api.waterRegionPic.deleteRegionPic(t.id).then(function(e){"ok"==e.msg?(a.$message({type:"success",message:"删除成功！"}),a.getRegionPic()):a.$message({type:"error",message:"您的账号权限不足！"})}).catch(function(){a.$message({type:"info",message:"删除失败！"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"flex"},[a("div",{staticClass:"content"},[a("div",{staticClass:"box"},[a("div",{staticClass:"box-header bg-aqua"},[e._v("校区及DMA照片管理")]),e._v(" "),a("div",{staticClass:"box-body"},[a("div",{staticStyle:{display:"inline-flex","flex-flow":"row","margin-bottom":"10px"}},[a("select-region",{attrs:{titleName:e.titleName,regionValue:e.regionValue},on:{change:e.change}}),e._v("\n           \n          "),a("el-upload",{attrs:{"on-change":e.handleChange,"auto-upload":!0,"http-request":e.uploadFiles,accept:"image/jpg,image/jpeg,image/png",action:""}},[a("el-button",{attrs:{size:"mini",type:"primary"}},[e._v("图片上传")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.imageData,size:"mini",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号"}}),e._v(" "),a("el-table-column",{attrs:{width:"200px",prop:"waterregionname",label:"建筑名称"}}),e._v(" "),a("el-table-column",{attrs:{width:"600px",label:"照片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("img",{staticClass:"image_type",attrs:{src:e.row.image}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除照片")])]}}])})],1)],1)])])])},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(e){a("+w4f")},"data-v-f82cc12e",null);t.default=o.exports}});
//# sourceMappingURL=33.92a5911131c4a5808f3d.js.map