webpackJsonp([21],{B8Nm:function(t,i){},Uraj:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("pFYg"),s=a.n(e),n=a("Xxa5"),l=a.n(n),d=a("exGp"),o=a.n(d),r=a("kWzz"),c=a("G6gj"),u={components:{MinimumFlowLine:c.a},name:"charts-line"},m={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"charts-line"},[i("minimum-flow-line")],1)},staticRenderFns:[]};var h=a("VU/8")(u,m,!1,function(t){a("B8Nm")},"data-v-f275a192",null).exports,v=a("vXGk"),f={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"water-table"},[a("div",{staticClass:"first-column",style:{width:t.columnWidth}},[a("div",{staticClass:"first-column-row"},[t._v("时段")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨0-1")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨1-2")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨2-3")]),t._v(" "),a("div",{staticClass:"first-column-row"},[t._v("凌晨3-4")])]),t._v(" "),t._l(t.table,function(i,e){return a("div",{key:e,staticClass:"middle-column",style:{width:t.columnWidth}},[a("div",{staticClass:"middle-column-row"},[t._v(t._s(i.date))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(i.first,i)}},[t._v(t._s(i.first))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(i.second,i)}},[t._v(t._s(i.second))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(i.third,i)}},[t._v(t._s(i.third))]),t._v(" "),a("div",{staticClass:"middle-column-row",class:{miniFlow:t.selectMin(i.fourth,i)}},[t._v(t._s(i.fourth))])])}),t._v(" "),t._l(15-t.table.length<0?0:15-t.table.length,function(i){return t.table.length<15?a("div",{staticClass:"middle-column",style:{width:t.columnWidth}},[a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"}),t._v(" "),a("div",{staticClass:"middle-column-row"})]):t._e()})],2)},staticRenderFns:[]};var b=function(t){a("r6R+")},w=a("VU/8")(v.a,f,!1,b,"data-v-044b5f18",null).exports,_=a("mF0L"),g=a("hCL4"),p={components:{MinimumFlowLine:c.a,SearchMinimumByTimes:g.a,SelectBuilding:r.a,MinimumTable:w,ChartsLine:h},name:"minimum-flow-monitoring",data:function(){return{columns:[{name:"日期",prop:"date"},{name:"凌晨0-1",prop:"first"},{name:"凌晨1-2",prop:"second"},{name:"凌晨2-3",prop:"third"},{name:"凌晨3-4",prop:"fourth"}],tableData:[],title:"建筑日最小流量检测数据",startTime:"",endTime:"",buildingId:137,xData:[],yData:[],show:!1,tableShow:!1}},created:function(){var t=this.$route.query;void 0!==t.buildingId&&(this.buildingId=t.buildingId);var i=this.$route.params;i.id&&(this.buildingId=i.id)},methods:{change:function(t){this.show=!1,this.tableShow=!1,this.startTime=t.startTime,this.endTime=t.endTime,this.getMinimumInf()},selectBuilding:function(t){this.show=!1,this.tableShow=!1,this.buildingId=t.id,this.getMinimumInf()},getMinimumInf:function(){var t=this;return o()(l.a.mark(function i(){var a,e;return l.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a={buildingid:t.buildingId,starttime:t.startTime,endtime:t.endTime},i.next=3,t.$api.buildingData.findTimesMinFlow(a);case 3:(e=i.sent).data&&e.data.length>0?(t.getChartsData(e.data),t.getTableData(e.data)):(t.show=!0,t.tableShow=!0,t.xData=[],t.yData=[],t.tableData=[]);case 5:case"end":return i.stop()}},i,t)}))()},getChartsData:function(t){var i=[],a=[];t&&"object"==(void 0===t?"undefined":s()(t))&&t.length>0&&(t.forEach(function(t){i.push(t.time),a.push(t.data.filter(function(t){return t.status})[0].data)}),this.xData=i,this.yData=a,this.show=!0)},getTableData:function(t){var i=[];t&&"object"==(void 0===t?"undefined":s()(t))&&t.length>0&&(t.forEach(function(t){i.push({date:t.time,first:t.data[0].data,second:t.data[1].data,third:t.data[2].data,fourth:t.data[3].data})}),this.tableData=i,this.tableShow=!0)},exportData:function(){Object(_.a)(this.columns,this.tableData,this.title)}}},C={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"flex"},[a("div",{staticClass:"content body"},[a("div",{staticClass:"box box-solid mini-charts"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("建筑日最小流量监测图表")]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.show,expression:"!show"}],staticClass:"box-body"},[a("div",{staticClass:"select-date"},[a("select-building",{attrs:{buildingId:t.buildingId},on:{change:t.selectBuilding}}),t._v(" "),a("search-minimum-by-times",{staticClass:"minimum",on:{change:t.change}})],1),t._v(" "),a("div",{staticClass:"charts-line"},[t.show?a("minimum-flow-line",{attrs:{xData:t.xData,yData:t.yData}}):t._e()],1)])]),t._v(" "),a("div",{staticClass:"box box-solid mini-table"},[a("div",{staticClass:"box-header bg-aqua"},[t._v("建筑日最小流量检测数据 "),a("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-download"},on:{click:t.exportData}},[t._v("导出")])],1),t._v(" "),a("div",{staticClass:"box-body"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.tableShow,expression:"!tableShow"}],staticClass:"mini-table-data"},[t.tableShow?a("minimum-table",{attrs:{tableData:t.tableData}}):t._e()],1)])])])])},staticRenderFns:[]};var x=a("VU/8")(p,C,!1,function(t){a("xQsV")},"data-v-4d837e21",null);i.default=x.exports},"r6R+":function(t,i){},vXGk:function(t,i,a){"use strict";(function(t){i.a={name:"minimum-table",data:function(){return{table:[{date:"2020-01-01",first:1e4,second:999,third:9999,four:1e3},{date:"2020-01-02",first:999,second:1e4,third:9999,four:1e3}]}},mounted:function(){this.table=this.tableData},props:{tableData:{type:Array}},methods:{selectMin:function(t,i){var a=!0;for(var e in i)Number(i[e])<Number(t)&&"date"!=e&&(a=!1);return a}},computed:{columnWidth:function(){return(t(document).width()-200)/this.tableData.length+"px"}}}}).call(i,a("7t+N"))},xQsV:function(t,i){}});
//# sourceMappingURL=21.a6ea4e6c7f123e9a096e.js.map